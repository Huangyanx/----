M.define("thread",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(d){this.eventState=this.eventState||{};this.eventList=[];this.closeList=[];this.openList=[];this.time=1000;if(M.object.isObject(d)){if(d.time&&M.object.isNumber(d.time)){this.time=d.time}this.isStart=false;if(d.eventList&&M.object.isArray(d.eventList)){this.eventList=d.eventList}if(this.eventList.length>0){for(var c=0;c<this.eventList.length;c++){if(this.eventList[c].name){this.eventState[this.eventList[c].name]=true}else{throw new Error("one eventName is null")}}}}},call:function(){var d=this;if(d.eventList.length>0){for(var c=0;c<d.eventList.length;c++){if(d.eventList[c]&&d.eventList[c].event){if(d.eventState[d.eventList[c].name]){d.runFunction(d.eventList[c]);d.runObject(d.eventList[c])}}}for(var c=0;c<d.closeList.length;c++){d.eventState[d.closeList[c]]=false}for(var c=0;c<d.openList.length;c++){d.eventState[d.openList[c]]=true}d.openList=[];d.closeList=[]}if(!d.stopThread){d.threadId=setTimeout(function(){d.isStart=true;d.call()},d.time)}},runFunction:function(e){var d=this;if(M.object.isFunction(e.event)){var c=null;if(e.source){c=e.source}if(e.name){d.eventState[e.name]=true}e.event.call(c,d.time)}},runObject:function(e){var d=this;if(M.object.isObject(e.event)){var c=null;if(e.source){c=e.source}if(M.object.isObject(e.event)&&M.object.isFunction(e.event.go)){e.event.go.call(c,d.time)}}},start:function(){var c=this;if(!c.isStart){c.threadId=setTimeout(function(){c.isStart=true;c.call()},c.time)}},openOne:function(c,e){var f=this;if(!M.object.isDefined(f.eventState[c])&&!f.eventState[c]){if(!e){f.eventState[c]=true}else{if(f.getOpenListIndex(c)==-1){f.openList.push(c);var d=f.getOpenListIndex(c);if(d>0){f.openList.splice(d,1)}}}}},closeOne:function(c,e){var f=this;if(!M.object.isDefined(f.eventState[c])&&f.eventState[c]){if(!e){f.eventState[c]=false}else{if(f.getCloseListIndex(c)!=-1){f.closeList.push(c);var d=f.getCloseListIndex(c);if(d>0){f.closeList.splice(d,1)}}}}},addOne:function(d,c){var e=this;if(M.object.isObject(d)){if(M.object.isObject(d)&&d.name){if(!c){e.eventState[d.name]=true}else{e.eventState[d.name]=false;e.openList.push(d.name)}e.eventList.push(d)}}},getCloseListIndex:function(d){var f=this;var c=-1;for(var e=0;e<f.closeList.length;e++){if(f.closeList[e]==d){c=e;break}}return c},getOpenListIndex:function(d){var f=this;var c=-1;for(var e=0;e<f.openList.length;e++){if(f.openList[e]==d){c=e;break}}return c},stop:function(){var c=this;if(!c.isStart){clearTimeout(c.threadId);c.stopThread=true}}});a.clazz=b});M.define("remoteStorage",function(b){var a=function(c,d){this.init(c,d)};M.object.merge(a.prototype,{init:function(c,e){this.op={WRITE:"W",READ:"R",DEL:"D",CLEAR:"X"};this.origin=c;this.path=e;this._iframe=null;this._iframeReady=false;this._queue=[];this._requests={};this._id=0;if(!this._iframe){var d=this;if(window.postMessage&&window.JSON&&window.localStorage){this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";this._iframe.src=this.origin+this.path;document.body.appendChild(this._iframe);if(window.addEventListener){this._iframe.addEventListener("load",function(){d._iframeLoaded()},false);window.addEventListener("message",function(f){d._handleMessage(f)},false)}else{if(this._iframe.attachEvent){this._iframe.attachEvent("onload",function(){d._iframeLoaded()},false);window.attachEvent("onmessage",function(f){d._handleMessage(f)})}}}else{throw new Error("Unsupported browser.")}}},get:function(c,f){var d=this;var e=null;d._toSend({op:d.op.READ,key:c},f);return e},set:function(c,e,f){var d=this;d._toSend({key:c,op:d.op.WRITE,value:e},f)},remove:function(c,e){var d=this;d._toSend({key:c,op:d.op.DEL},e)},removeAll:function(d){var c=this;c._toSend({op:c.op.CLEAR},d)},_toSend:function(e,f){var d=this;var c={request:{key:e.key,id:++this._id,op:e.op,value:e.value},callback:f};if(d._iframeReady){d._sendRequest(c)}else{d._queue.push(c)}if(!d._iframe){d.init()}},_sendRequest:function(d){var c=this;c._requests[d.request.id]=d;c._iframe.contentWindow.postMessage(JSON.stringify(d.request),c.origin)},_iframeLoaded:function(){var e=this;e._iframeReady=true;if(e._queue.length){for(var d=0,c=this._queue.length;d<c;d++){e._sendRequest(e._queue[d])}e._queue=[]}},_handleMessage:function(c){var e=this;var d=JSON.parse(c.data);e._requests[d.id].callback&&e._requests[d.id].callback(d.key,d.value);delete e._requests[d.id]}});b.clazz=a});M.define("searchland",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(j){var d="searchland";this.formId=j.formId?j.formId:"";this.submitId=j.submitId?j.submitId:"";this.catelogyListId=j.catelogyListId?j.catelogyListId:"";this.isHome=j.isHome?j.isHome:false;this.renderId=j.renderId?j.renderId:"";this.closeSearchLandBtnId=j.closeSearchLandBtnId?j.closeSearchLandBtnId:"";this.claerKeywordBtnId=j.claerKeywordBtnId?j.claerKeywordBtnId:"";this.keywordId=j.keywordId?j.keywordId:"";this.searchPanelId=j.searchPanelId?j.searchPanelId:"";this.keyword=j.keyword?j.keyword:"";this.searchType=j.searchType?j.searchType:"";this.keywordIsObj=false;this.isSo=false;if(M.object.isObject(this.keyword)){this.keywordIsObj=true}else{this.keyword=M.string.decodeHtml(this.keyword)}this.searchHistoryLocalStorageName="searchhistory_3";this.searchHistoryId=M.genId(d);this.hotSearchId=M.genId(d);this.hotSearchBtn=M.genId(d);this.clearHistoryId=M.genId(d);this.hotKeyWordId=M.genId(d);this.iscategory=j.iscategory?j.iscategory:false;this.isHome=j.isHome?j.isHome:false;this.localstorage=null;this.searchHistoryListIdList=[];this.hotKeyWordBtnIds=[];this.searchliIdList=[];this.searchliTagIdList=[];this.searchHistoryList=null;this.hotKeywordIndex=0;this.searchLoop=false;this.openSearchLoad=false;this.isHistoryPanel=false;this.showFuncObj=j.showFuncObj?j.showFuncObj:null;this.hideFuncObj=j.hideFuncObj?j.hideFuncObj:null;if(window.location.href.indexOf("//so.m.jd.com")>0){this.isSo=true;this.localstorage=M.localstorage}else{var g=true;if(g){try{window.localStorage.setItem("M_test",1)}catch(h){g=false;M.log("localStorage无法set","error")}try{window.localStorage.getItem("M_test")}catch(h){g=false;M.log("localStorage无法get","error")}try{window.localStorage.removeItem("M_test")}catch(h){g=false;M.log("localStorage无法remove","error")}}var c="so.m.jd.com";if(window.location.href.indexOf("https://")>=0){c="https://"+c}else{c="http://"+c}if(g){this.isSo=false;this.localstorage=new (M.exports("remoteStorage").clazz)(c,"/solocalocalstorage.html")}else{this.isSo=true;this.localstorage=M.localstorage}}if(this.keywordIsObj){var i=this.keyword.showWord?this.keyword.showWord:"";if(this.keyword.keyword){if(this.keyword.keyword!=this.keyword.realWord){var f=M.string.decodeHtml(this.keyword.keyword);$("#"+this.keywordId).val(f)}else{$("#"+this.keywordId).val("")}}else{$("#"+this.keywordId).val("")}$("#"+this.keywordId).attr("placeholder",i)}else{$("#"+this.keywordId).val(this.keyword)}$("#"+this.keywordId).addClass("hilight1")},mainHtml:function(){var d=this;var c=[];c.push('<div id="search_land_searchland" class="search-land">');c.push("</div>");return c.join("")},loadHotKeyword:function(){var c=this;if(!c.hotKeyword){M.http.ajax({url:"//so.m.jd.com/ware/hotKeyWord.action?_format_=json",success:function(f){if(f&&f.hotKeyWord){var j=f.hotKeyWord;try{j=JSON.parse(j);var h=j.def?j.def:[];var d=j.owner?j.owner:[];if(h.length>0){c.hotKeyword=h;if(d.length>0){for(var g=0;g<d.length;g++){if(d[g].hotWord&&d[g].num&&d[g].num<=h.length){if(M.object.isString(d[g].hotWord)){c.hotKeyword[d[g].num-1]=d[g].hotWord}}else{if(M.object.isString(d[g].hotWord)){c.hotKeyword.push(d[g].hotWord)}}}}}else{c.hotKeyword=[];if(d.length>0){for(var g=0;g<d.length;g++){c.hotKeyword.push(d[g].hotWord)}}}}catch(k){c.hotKeyword=[]}}else{c.hotKeyword=[]}c.searchHotKeyHtml()},error:function(){c.hotKeyword=[];c.searchHotKeyHtml()}})}else{c.searchHotKeyHtml()}},searchHotKeyHtml:function(){var e=this;var d=[];if(e.hotKeyword&&e.hotKeyword.length>0){e.hotKeyWordBtnIds=[];d.push('<div id="'+e.hotSearchId+'" class="hot-search">');d.push('<div class="hot-search-head cf">');d.push("<p>热门搜索</p>");d.push('<i class="around-pic" id="'+e.hotSearchBtn+'"></i>');d.push("</div>");d.push('<div id="'+e.hotKeyWordId+'" class="hot-search-tags">');for(var c=0;c<6&&c<e.hotKeyword.length;c++){var f="searchland_hotKeywordList_"+c;e.hotKeyWordBtnIds.push(f);e.hotKeywordIndex=c;d.push("<span>");d.push('<a href="javascript:void(0);" id="'+f+'"><i>'+e.hotKeyword[c]+"</i></a>");d.push("</span>")}}d.push("</div>");d.push("</div>");$("#search_land_searchland").append(d.join(""));e.searchHotKeyBind()},searchHotKeyBind:function(){var d=this;if(d.hotKeyWordBtnIds.length>0){for(var c=0;c<d.hotKeyWordBtnIds.length;c++){$("#"+d.hotKeyWordBtnIds[c]).on("click",function(){var e=$.trim($(this).text());if(e!=""){var f={};f.text=e;f.href="//so.m.jd.com/ware/search.action?keyword="+e;d.searchLandSubmit(f,"MSearch_HotWords")}})}$("#"+d.hotSearchBtn).on("click",function(){var f=0;var h=[];for(var g=d.hotKeywordIndex+1,e=g+6;g<e&&g<d.hotKeyword.length;g++){f++;d.hotKeywordIndex=g;h.push(d.hotKeyword[g])}if(f<6){for(var g=0,e=6-f;g<e&&g<d.hotKeyword.length;g++){f++;d.hotKeywordIndex=g;h.push(d.hotKeyword[g])}}$(this).addClass("turn-around");d.sendMping("MSearch_ChangeKeyWords");setTimeout(function(){$("#"+d.hotSearchBtn).removeClass("turn-around")},800);var k=$("#"+d.hotKeyWordId).find("a");d.searchLandHotKeywordRecursiveFade(k,h,0,f)})}},searchLandHotKeywordRecursiveFade:function(c,g,d,f){var h=this;if(d<f){for(var e=d;e<f;e++){if(e<=2){$(c[e]).find("i").addClass("move1")}else{$(c[e]).find("i").addClass("move2")}}setTimeout(function(){for(var j=d;j<f;j++){if(j<=2){$(c[j]).find("i").text(g[j])}}},310);setTimeout(function(){for(var j=d;j<f;j++){if(j<=2){$(c[j]).find("i").removeClass("move1")}}},500);setTimeout(function(){for(var j=d;j<f;j++){if(j>2){$(c[j]).find("i").text(g[j])}}},410);setTimeout(function(){for(var j=d;j<f;j++){if(j>2){$(c[j]).find("i").text(g[j]);$(c[j]).find("i").removeClass("move2")}}},750)}},searchHistoryHtml:function(f){var g=this;var d=[];try{g.searchHistoryList=JSON.parse(f)}catch(h){g.searchHistoryList=null;g.localstorage.remove(g.searchHistoryLocalStorageName)}if(g.searchHistoryList!=null&&!M.object.isArray(g.searchHistoryList)){g.searchHistoryList=null;g.localstorage.remove(g.searchHistoryLocalStorageName)}if(g.searchHistoryList&&g.searchHistoryList.length>0){d.push('<div id="'+g.searchHistoryId+'" class="recent-search">');d.push('<div class="recent-search-head cf">');d.push("<p>最近搜索</p>");d.push('<i id="'+g.clearHistoryId+'" class="garbage-pic"></i>');d.push("</div>");d.push('<div class="recent-search-tags">');g.searchHistoryListIdList=[];for(var c=0;c<g.searchHistoryList.length;c++){var j="searchland_searchHistoryList_"+c;g.searchHistoryListIdList.push(j);d.push("<span>");d.push('<a id="'+j+'" searchland_index="'+c+'" href="javascript:void(0);">'+g.searchHistoryList[c].text+"</a>");d.push("</span>")}d.push("</div>");d.push("</div>")}$("#search_land_searchland").html(d.join(""));g.searchHistoryBind();g.loadHotKeyword()},searchHistoryBind:function(){var d=this;if(d.searchHistoryListIdList&&d.searchHistoryListIdList.length>0){for(var c=0;c<d.searchHistoryListIdList.length;c++){$("#"+d.searchHistoryListIdList[c]).on("click",function(){var e=$(this).attr("searchland_index");var f=d.searchHistoryList[e];d.searchLandSubmit(f,"MSearch_HistoryRecords")})}$("#"+d.clearHistoryId).on("click",function(){d.sendMping("MSearch_ClearHistory");if(confirm("确定要清空吗?")){d.sendMping("MSearch_ClearHistoryConfirm");d.clearHistory();$("#"+d.controlId).html("");$("#"+d.clearHistoryId).parent().parent().attr("style","display:none;")}else{d.sendMping("MSearch_ClearHistoryCancel")}})}},searchLoadControl:function(){var d=this;var c=$("#"+d.keywordId).val().trim();if(c==""&&d.searchLoop){$("#"+d.claerKeywordBtnId).attr("style","display:none;");if(!d.isHistoryPanel){d.searchHistoryFromStorage(d.searchHistoryHtml);d.isHistoryPanel=true}}else{if(c!=""&&d.oldkeyword!=c&&d.searchLoop){$("#"+d.claerKeywordBtnId).attr("style","");d.searchKeyLoad(c)}}setTimeout(function(){d.searchLoadControl()},500)},searchKeyLoad:function(c){var d=this;d.searchLoop=false;d.oldkeyword=c;d.searchLocalStorage=false;M.http.ajax({url:"//so.m.jd.com/ware/tip.action",data:{keyword:c,_format_:"json"},success:function(f){if(f&&f.searchTipList&&d.openSearchLoad){var e=JSON.parse(f.searchTipList);if(e){d.tipArray=e;$("#search_land_searchland").html(d.serchKeyHtml(d.tipArray));d.serchKeyBind()}d.searchLoop=true;d.isHistoryPanel=false}else{if(d.openSearchLoad){d.searchLoop=true;d.isHistoryPanel=false}}},error:function(e){if(d.openSearchLoad){d.searchLoop=true;d.isHistoryPanel=false}}})},serchKeyHtml:function(n){var c=this;c.searchliIdList=[];var e=[];if(n){e.push('<ul class="association-normal">');var k=0;if(n.attachInfoList&&n.attachInfoList.length>0){for(var h=0;h<n.attachInfoList.length;h++){if(n.attachInfoList[h].attachType=="0"){var d="searchland_attachInfoIdList_li_"+h;c.searchliIdList.push(d);var m="店铺搜索  >"+n.attachInfoList[h].searchQuery;e.push('<li searchland_type="2" searchland_index="'+h+'" id="'+d+'">');e.push('<a href="javascript:void(0);">');e.push('<i class="shop-pic"></i>');var l="association-shop-name";e.push('<span class="'+l+'">'+m+"</span>");e.push("</a>");e.push("</li>")}}}if(n.wareList&&n.wareList.length>0){for(var h=0;h<n.wareList.length;h++){var d="searchland_li_"+h;c.searchliIdList.push(d);var m=n.wareList[h].wname;e.push('<li searchland_type="1" searchland_index="'+h+'" id="'+d+'">');e.push('<a href="javascript:void(0);">');var l="association-product-name";e.push('<span class="'+l+'">'+m+"</span>");if(n.wareList[h].tag&&n.wareList[h].tag.length>0){for(var g=0;g<n.wareList[h].tag.length&&g<3;g++){if(n.wareList[h].tag[g].tagsearchquery&&n.wareList[h].tag[g].tagshowquery){var f=M.genId("searchland_li_tag");c.searchliTagIdList.push(f);e.push('<span pingparam="'+(g+1)+'" id="'+f+'" tagsearchquery="'+n.wareList[h].tag[g].tagsearchquery+'" class="association-product-btn">'+n.wareList[h].tag[g].tagshowquery+"</span>")}}}e.push("</a>");e.push("</li>")}}e.push("</ul>")}return e.join("")},serchKeyBind:function(d){var e=this;if(e.searchliIdList.length>0){for(var c=0;c<e.searchliIdList.length;c++){$("#"+e.searchliIdList[c]).on("click",function(n){var i=$(this).attr("searchland_index");var j=$(this).attr("searchland_type");var l=null;if(j=="1"){l=e.tipArray.wareList}else{if(j=="2"){l=e.tipArray.attachInfoList}}if(l&&l.length>i){var k=l[i];var m={};var h=null;var g=null;if(j=="2"&&k.attachType=="0"){h="MSearch_Shopsearch";m.text="店铺搜索  >"+k.searchQuery;m.href="//so.m.jd.com/shop/searchShop.action?keyword="+k.searchQuery;g={event_param:k.searchQuery}}else{if(j=="1"){h="MSearch_SearchDropDownAssociationalWords";m.text=k.wname;m.href="//so.m.jd.com/ware/search.action?keyword="+k.wname;g={event_param:k.wname+"_0"}}}e.searchLandSubmit(m,h,g)}})}}if(e.searchliTagIdList.length>0){while(e.searchliTagIdList.length>0){var f=e.searchliTagIdList.pop();$("#"+f).on("click",function(i){var h=$(this).attr("tagsearchquery");var g=$(this).attr("pingparam");e.sendMping("MSearch_AssociationLabel",{event_param:g,event_level:"2"});e.searchLandSubmit(h);i.stopPropagation()})}}},sendMping:function(f,c){if(f){try{var g=new MPing.inputs.Click(f);if(c){g=M.object.merge(g,c)}var d=new MPing();d.send(g)}catch(h){}}},clearHistory:function(){var c=this;c.localstorage.remove(c.searchHistoryLocalStorageName)},searchHistoryFromStorage:function(d){var f=this;if(f.isSo){var c=f.localstorage.get(f.searchHistoryLocalStorageName);d.call(f,c)}else{try{f.localstorage.get(f.searchHistoryLocalStorageName,function(h,e){d.call(f,e)})}catch(g){d.call(f,null)}}},searchLandSubmit:function(d,f,c){var i=this;var h=null;var j=null;var e=null;if(M.object.isObject(d)){j=d;e=j.text}else{if(i.keywordIsObj&&d==i.keyword.showWord){j={};j.text=i.keyword.realWord;j.href="//so.m.jd.com/ware/search.action?keyword="+i.keyword.realWord;e=i.keyword.realWord}else{j={};j.text=d;j.href="//so.m.jd.com/ware/search.action?keyword="+d;e=d}}if(j){var g={event_param:e};if(c){g=c}var i=this;i.sendMping(f,g);setTimeout(function(){i.searchLandAddHistory(j,function(){$("#"+i.formId).attr("action",j.href);location.href=j.href;i.searchLoop=false})},200)}},searchLandAddHistory:function(e,c){var d=this;d.searchHistoryFromStorage(function(h){var j=this;try{h=JSON.parse(h)}catch(k){h=null;try{j.localstorage.remove(j.searchHistoryLocalStorageName)}catch(k){}}if(!M.object.isArray(h)){h=null;j.localstorage.remove(j.searchHistoryLocalStorageName)}e.text=j.makeSearchName(e.text);delete e.tipNumber;if(h&&h.length>0){var f=[e];for(var g=0;g<h.length;g++){if(f.length==18){break}if(h[g].text!=e.text){f.push(h[g])}}h=f}else{h=[];h.push(e)}j.localstorage.set(j.searchHistoryLocalStorageName,JSON.stringify(h));c.call(j)})},makeSearchName:function(c){if(c.length>=30){c=c.substring(0,30)}return c},searchTransformation:function(){var f=this;if(!f.openSearchLoad){var c=$("body").children("div");$("body").removeClass("hide-landing");$("body").addClass("show-landing");$("body").addClass("history-color");if(!f.isHome){$("#layout_appdown").attr("style","display:none;")}for(var d=0;d<c.length;d++){if($(c[d]).attr("id")!="search_land_searchland"&&!$(c[d]).attr("search_land_searchTransformation_show")){$(c[d]).attr("style","display:none;")}}$("body").children("footer").attr("style","display:none;");if(f.showFuncObj&&f.showFuncObj.func){var e=f.showFuncObj.source?f.showFuncObj.source:null;f.showFuncObj.func.call(e)}$("#"+f.searchPanelId).removeClass("on-blur");$("#"+f.searchPanelId).addClass("on-focus");window.scrollTo(0,1);f.openSearchLoad=true;f.searchLoop=true;f.isHistoryPanel=false}else{$("body").removeClass("show-landing");$("body").removeClass("history-color");$("body").addClass("hide-landing");var c=$("body").children("div");if(!f.isHome&&!$("#layout_appdown").attr("search_land_searchTransformation_show")){$("#layout_appdown").attr("style","")}$("#search_land_searchland").html("");for(var d=0;d<c.length;d++){if($(c[d]).attr("id")!="search_land_searchland"&&!$(c[d]).attr("search_land_searchTransformation_show")){$(c[d]).attr("style","")}}$("body").children("footer").attr("style","");if(f.hideFuncObj&&f.hideFuncObj.func){var e=f.hideFuncObj.source?f.hideFuncObj.source:null;f.hideFuncObj.func.call(e)}f.openSearchLoad=false;f.searchLoop=false;f.searchLocalStorage=false;f.isHistoryPanel=false;f.oldkeyword="";$("#"+f.controlId).html("");$("#"+f.searchPanelId).removeClass("on-focus");$("#"+f.searchPanelId).addClass("on-blur");$("#"+f.hotKeyWordId).show();$("#"+f.hotKeyWordheadId).show()}},render:function(){var c=this;if(M.object.isObject(c.renderId)||M.object.isArray(c.renderId)){$(c.renderId).append(c.mainHtml())}else{$("#"+c.renderId).append(c.mainHtml())}$("body").addClass((c.isHome?"mhome":""));$("body").addClass("hide-landing");$("#"+c.keywordId).on("click",function(g){var d=null;if(c.isHome){if(c.openSearchLoad){d="MSearch_Search"}else{d="MHome_Search"}}else{if(!c.searchType){if(c.iscategory){d="MFilter_Search"}else{d="MProductList_Search"}}else{if(c.searchType=="pinpai"){d="MSearchBrand_Search"}}}c.sendMping(d);if(!c.openSearchLoad){if(c.landSearchWordHide){$("#"+c.keywordId).val("")}else{var h=c.keyword;if(c.keywordIsObj){h=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var f=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(f)}else{$("#"+c.keywordId).val("")}}$("#"+c.keywordId).attr("placeholder",h)}else{$("#"+c.keywordId).val(h)}}c.searchTransformation()}});$("#"+c.keywordId).on("keydown",function(f){if(f.keyCode=="13"){var d=$.trim($("#"+c.keywordId).val());var g=$.trim($("#"+c.keywordId).attr("placeholder"));if(d==""&&g!=""){d=g}if(d!=""){c.searchLandSubmit(d,"MSearch_Searchthi")}}return});$("#"+c.closeSearchLandBtnId).on("click",function(){if(c.openSearchLoad){c.searchTransformation();c.sendMping("MSearch_Back");var e=c.keyword;if(c.keywordIsObj){e=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var d=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(d)}else{$("#"+c.keywordId).val("")}}else{$("#"+c.keywordId).val("")}$("#"+c.keywordId).attr("placeholder",e)}else{$("#"+c.keywordId).val(e)}$("#"+c.keywordId).addClass("hilight1")}});$("#"+c.submitId).on("click",function(){var e=$.trim($("#"+c.keywordId).val());var f=$.trim($("#"+c.keywordId).attr("placeholder"));if(e==""&&f!=""){e=f}if(e!=""){var d=null;if(c.isHome){if(c.openSearchLoad){d="MSearch_SearchButton"}else{d="MHome_SearchButton"}}else{d="MSearch_SearchButton"}c.searchLandSubmit(e,d)}});$("#"+c.keywordId).on("keyup",function(){if($(this).val()!=c.keyword){$(this).removeClass("hilight1");$(this).addClass("hilight2")}else{$(this).removeClass("hilight2");$(this).addClass("hilight1")}});$("#"+c.claerKeywordBtnId).on("click",function(){c.sendMping("MSearch_Clear",{event_param:""});$("#"+c.keywordId).val("");$("#"+c.keywordId)[0].focus();$(this).attr("style","display:none;")});c.searchLoadControl()}});a.clazz=b});M.define("Imglazyload",function(a){var b=function(d){this.init()};M.object.merge(b.prototype,{init:function(){this.imgmp={};this.sendindex=8},lazyLad:function(n){var f=this;var d=$(window).height();var m=$("img[imgsrc]");var j=$(window).scrollTop();var k=n&&!!rTimeArr;for(var l=0,o=m.size();l<o;l++){currentObj=$(m[l]);var q=currentObj.offset().top-d-200;if(parseInt(j)>=parseInt(q)){currentObj.addClass("opa1");var h=currentObj.attr("imgsrc").replace(/http:/g,"");if(k){try{var g=h.split(".com")[0];if(!!g&&!!!f.imgmp[g]){f.imgmp[g]=1;rTimeArr[f.sendindex]={sTime:new Date()};currentObj[0].currentindex=f.sendindex++;currentObj[0].onload=function(){rTimeArr[this.currentindex].time=new Date()}}}catch(p){}}currentObj.attr("src",h);currentObj.removeAttr("imgsrc");if(!!currentObj.attr("imgtitle")){currentObj[0].onload=function(){var i=$(this).parent().is(".graphic-img")||$(this).parent().is(".show-img");if(i){$(this).closest(".graphic-separation").find(".space-img").css({opacity:0});var e=$(this).closest(".graphic-img").siblings(".graphic-text");if(e.length>0){e.css({opacity:"1"})}}}}}}},squareImg:function(d){$(d).each(function(){var e=$(this).height();if(e>10){$(this).css({width:e})}})}});var c=b;a.clazz=b});var slide=(function(){var a=function(c){return new b(c)};function b(c){this.elem=c;this.oBox=document.querySelector(c);this.aLi=document.querySelectorAll(c+" [data-ul-child=child]");this.oUl=document.querySelector(c+" [data-slide-ul=firstUl]");this.now=0;this.on0ff=false}b.prototype={init:function(c){var c=c||{},d=this.aLi;this.defaults={startIndex:0,loop:false,smallBtn:false,number:false,laseMoveFn:false,location:false,preDef:"lnr",autoPlay:false,autoHeight:false,preFn:null,lastImgSlider:false,playTime:6000,callback:null,verticalCenter:false,fullScreen:true,total:0};b.extend(this.defaults,c);this.now=this.defaults.startIndex;this.initBtn();this.liInit();this.bind();if(this.aLi.length<2){if(this.defaults.smallBtn){this.oSmallBtn.style.display="none"}if(this.defaults.number){this.pageNub.style.display="none"}this.defaults.autoPlay=false;this.defaults.loop=false}if(this.defaults.autoPlay){this.pause();this.play()}},initBtn:function(){this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");var d=this.aLi;if(this.defaults.callback){this.defaults.callback(1)}if(this.defaults.smallBtn){this.oSmallBtn=document.querySelector(this.elem+' [data-small-btn="smallbtn"]');this.oSmallBtn.innerHTML=this.addSmallBtn();this.btns=document.querySelectorAll(this.elem+' [data-ol-btn="btn"]');for(var c=0;c<this.btns.length;c++){this.btns[c].className=""}this.btns[b.getNow(this.now,d.length)].className="active"}if(this.defaults.number){this.pageNub=document.getElementById("page-nub");this.slideNub=document.getElementById("slide-nub");this.slideSum=document.getElementById("slide-sum");this.slideNub.innerHTML=(this.now+1)%(this.aLi.length);this.slideSum.innerHTML=this.aLi.length}this.defaults.total=this.aLi.length;if(this.aLi.length==2||this.aLi.length==3){if(this.defaults.loop){this.oUl.innerHTML+=this.oUl.innerHTML}this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");this.need=true}},bind:function(){var f=this.oBox,e=b._device();if(!e.hasTouch){f.style.cursor="pointer";f.ondragstart=function(g){if(g){return false}return true}}var d="onorientationchange" in window;var c=d?"orientationchange":"resize";window.addEventListener(c,this);if(this.aLi.length<2){if(this.defaults.smallBtn){this.oSmallBtn.style.display="none"}if(this.defaults.number){this.pageNub.style.display="none"}return}f.addEventListener(e.startEvt,this);window.addEventListener("touchcancel",this);if(navigator.userAgent.indexOf("baidubrowser")!=-1){window.addEventListener("focusin",this);window.addEventListener("focusout",this)}else{window.addEventListener("blur",this);window.addEventListener("focus",this)}},liInit:function(){var e=this.aLi,g=e.length,c=this.aLi[0].offsetWidth,k=this.aLi[0].offsetHeight,o=this.oUl,n=this.oBox.offsetWidth,d=320,f=this.now,m=this;if(this.defaults.preFn){this.defaults.preFn()}for(var j=0;j<g;j++){b.setStyle(e[j],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease",height:"auto"})}if(this.defaults.fullScreen){o.style.width=n*g+"px";if(this.defaults.autoHeight){d=this.oBox.offsetWidth;if(d>=640){d=640}for(var j=0;j<g;j++){e[j].style.width=d+"px"}var l=e[0].getElementsByTagName("img")[0];if(l){var h=new Image();h.onload=function(){m.oBox.style.height=e[0].offsetHeight+"px";m.oUl.style.height=e[0].offsetHeight+"px";if(m.defaults.verticalCenter){if(m.oBox.style.height.replace("px","")>=document.documentElement.clientHeight){m.oBox.parentNode.style.top="50px";m.oBox.parentNode.style.marginTop=0}else{m.oBox.parentNode.style.top="50%";m.oBox.parentNode.style.marginTop="-50%"}}for(var p=0;p<e.length;p++){e[p].style.height=e[0].offsetHeight+"px"}};h.src=l.src}else{this.oBox.style.height=e[0].offsetHeight+"px"}}}else{d=this.oBox.offsetWidth;if(d>=640){d=640}c=(d/320)*225;k=(d/320)*150;for(var j=0;j<g;j++){e[j].style.width=c+"px";e[j].style.height=k+"px"}o.style.width=c*g+"px";this.oBox.style.height=k+"px";this.oUl.style.height=k+"px";e[0].style.padding="0";n=c}if(this.defaults.loop){for(var j=0;j<g;j++){b.setStyle(e[j],{position:"absolute",left:0,top:0});if(j==b.getNow(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+0+"px, 0px, 0px)",transform:"translate3d("+0+"px, 0px, 0px)",zIndex:10})}else{if(j==b.getPre(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+-n+"px, 0px, 0px)",transform:"translate3d("+-n+"px, 0px, 0px)",zIndex:10})}else{if(j==b.getNext(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+n+"px, 0px, 0px)",transform:"translate3d("+n+"px, 0px, 0px)",zIndex:10})}else{if(j==b.getNextNew(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+n*2+"px, 0px, 0px)",transform:"translate3d("+n*2+"px, 0px, 0px)",zIndex:10})}else{b.setStyle(e[j],{WebkitTransform:"translate3d("+-n+"px, 0px, 0px)",transform:"translate3d("+-n+"px, 0px, 0px)",zIndex:9})}}}}}}else{for(var j=0;j<g;j++){b.setStyle(e[j],{WebkitTransform:"translate3d("+f*-n+"px, 0px, 0px)",transform:"translate3d("+f*-n+"px, 0px, 0px)"})}}},handleEvent:function(d){var c=b._device(),e=this.oBox;switch(d.type){case c.startEvt:if(this.defaults.autoPlay){this.pause()}this.startHandler(d);break;case c.moveEvt:if(this.defaults.autoPlay){this.pause()}this.moveHandler(d);break;case c.endEvt:if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(d);break;case"touchcancel":if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(d);break;case"orientationchange":this.orientationchangeHandler();break;case"resize":this.orientationchangeHandler();break;case"focus":if(this.defaults.autoPlay){this.pause();this.play()}break;case"blur":if(this.defaults.autoPlay){this.pause()}break;case"focusin":if(this.defaults.autoPlay){this.pause();this.play()}break;case"focusout":if(this.defaults.autoPlay){this.pause()}break}},startHandler:function(e){this.on0ff=true;var d=b._device(),f=d.hasTouch,h=this.oBox,c=this.now,g=this.aLi;h.addEventListener(d.moveEvt,this);h.addEventListener(d.endEvt,this);this.downTime=Date.now();this.downX=f?e.targetTouches[0].pageX:e.clientX-h.offsetLeft;this.downY=f?e.targetTouches[0].pageY:e.clientY-h.offsetTop;this.startT=b.getTranX(g[b.getNow(c,g.length)]);this.startNowT=b.getTranX(g[b.getNow(c,g.length)]);this.startPreT=b.getTranX(g[b.getPre(c,g.length)]);this.startNextT=b.getTranX(g[b.getNext(c,g.length)]);this.startNextN=b.getTranX(g[b.getNextNew(c,g.length)]);b.stopPropagation(e)},moveHandler:function(q){var n=this.oBox,e=b._device();if(this.on0ff){var o=e.hasTouch;var j=o?q.targetTouches[0].pageX:q.clientX-n.offsetLeft;var h=o?q.targetTouches[0].pageY:q.clientY-n.offsetTop;var c=this.aLi,g=c.length,d=this.now,t=c[0].offsetWidth;if(this.defaults.preDef=="all"){b.stopDefault(q)}for(var m=0;m<g;m++){b.setStyle(c[m],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease"})}if(Math.abs(j-this.downX)<Math.abs(h-this.downY)){if(this.defaults.preDef=="tnd"&&this.defaults.preDef!="all"){b.stopDefault(q)}}else{if(Math.abs(j-this.downX)>10){if(this.defaults.preDef=="lnr"&&this.defaults.preDef!="all"){b.stopDefault(q)}if(this.defaults.loop){k=(this.startNowT+j-this.downX).toFixed(4);var s=(this.startPreT+j-this.downX).toFixed(4);var f=(this.startNextT+j-this.downX).toFixed(4);var l=(this.startNextN+j-this.downX).toFixed(4);b.move(c[b.getNow(d,g)],k,10,this.defaults.fullScreen);b.move(c[b.getPre(d,g)],s,10,this.defaults.fullScreen);b.move(c[b.getNext(d,g)],f,10,this.defaults.fullScreen);b.move(c[b.getNextNew(d,g)],l,10,this.defaults.fullScreen)}else{var k=b.getTranX(c[d]);if(k>0){var p=((this.startT+j-this.downX)/3).toFixed(4);for(var m=0;m<g;m++){b.move(c[m],p)}}else{if(Math.abs(k)>=Math.abs((g-1)*t)){var p=(this.startT+(j-this.downX)/3).toFixed(4);for(var m=0;m<g;m++){b.move(c[m],p)}if(this.defaults.laseMoveFn&&typeof this.defaults.laseMoveFn=="function"){var r=(p-this.startT).toFixed(4);this.defaults.laseMoveFn(r)}}else{var p=(this.startT+j-this.downX).toFixed(4);for(var m=0;m<g;m++){b.move(c[m],p)}}}}}}}else{n.removeEventListener(e.moveEvt,this);n.removeEventListener(e.endEvt,this)}b.stopPropagation(q)},endHandler:function(i){i.stopPropagation();this.on0ff=false;var f=Date.now(),e=b._device(),h=e.hasTouch,g=this.oBox,l=h?i.changedTouches[0].pageX:i.clientX-g.offsetLeft,k=h?i.changedTouches[0].pageY:i.clientY-g.offsetTop,c=this.aLi,j=c[0].offsetWidth,d=b.getTranX(c[b.getNow(this.now,c.length)]);if(l-this.downX<30&&l-this.downX>=0&&Math.abs(k-this.downY)<30){this.tab(d,"+=");return"click"}else{if(l-this.downX>-30&&l-this.downX<=0&&Math.abs(k-this.downY)<30){this.tab(d,"-=");return"click"}else{if(Math.abs(k-this.downY)-Math.abs(l-this.downX)>30&&l-this.downX<0){this.tab(d,"-=");return}if(Math.abs(k-this.downY)-Math.abs(l-this.downX)>30&&l-this.downX>0){this.tab(d,"+=");return}if(l<this.downX){if(this.downX-l>j/3||f-this.downTime<200){this.now++;this.tab(d,"++");return"left"}else{this.tab(d,"+=");return"stay"}}else{if(l-this.downX>j/3||f-this.downTime<200){this.now--;this.tab(d,"--");return"right"}else{this.tab(d,"-=");return"stay"}}}}b.stopPropagation(i);g.removeEventListener(e.moveEvt,this);g.removeEventListener(e.endEvt,this)},tab:function(e,l,f){var c=this.aLi,k=c.length,r=c[0].offsetWidth,q=this.oBox,g=b._device(),p=this,d=this.now;if(this.defaults.callback&&(l=="++"||l=="--")){this.defaults.callback((b.getNow(d,k)+1)%this.defaults.total==0?this.defaults.total:(b.getNow(d,k)+1)%this.defaults.total)}$(c[b.getNow(p.now,k)]).addClass("active").siblings().removeClass("active");if(this.defaults.loop){if(d<0){d=k-1;this.now=k-1}for(var o=0;o<k;o++){if(o==b.getPre(d,k)){var h;switch(l){case"++":h=300;break;case"--":h=0;break;case"+=":h=0;break;case"-=":h=300;break;default:break}b.setStyle(c[b.getPre(d,k)],{WebkitTransform:"translate3d("+-r+"px, 0px, 0px)",transform:"translate3d("+-r+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+h+"ms ease",transition:"all "+h+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getPre(d,k)],{padding:"0.8%"})}}else{if(o==b.getNow(d,k)){b.setStyle(c[b.getNow(d,k)],{WebkitTransform:"translate3d("+0+"px, 0px, 0px)",transform:"translate3d("+0+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getNow(d,k)],{padding:"0"})}}else{if(o==b.getNext(d,k)){var h=300;switch(l){case"++":h=0;break;case"--":h=300;break;case"+=":h=300;break;case"-=":h=0;break;default:break}b.setStyle(c[b.getNext(d,k)],{WebkitTransform:"translate3d("+r+"px, 0px, 0px)",transform:"translate3d("+r+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+h+"ms ease",transition:"all "+h+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getNext(d,k)],{padding:"0.8%"})}}else{if(o==b.getNextNew(d,k)){var h;switch(l){case"++":h=0;break;case"--":h=300;break;case"+=":h=300;break;case"-=":h=0;break;default:break}b.setStyle(c[b.getNextNew(d,k)],{WebkitTransform:"translate3d("+r*2+"px, 0px, 0px)",transform:"translate3d("+r*2+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+h+"ms ease",transition:"all "+h+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getNextNew(d,k)],{padding:"0.8%"})}}else{b.setStyle(c[o],{WebkitTransform:"translate3d("+r*2+"px, 0px, 0px)",transform:"translate3d("+r*2+"px, 0px, 0px)",zIndex:9,WebkitTransition:"all "+0+"ms ease",transition:"all "+0+"ms ease"})}}}}}}else{for(var o=0;o<k;o++){b.setStyle(c[o],{WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"})}if(d<=0){d=0;this.now=0}if(d>k-1){if(f){d=0;this.now=0}else{d=k-1;this.now=k-1}}for(var n=0;n<k;n++){b.setStyle(c[n],{WebkitTransform:"translate3d("+(-d*r)+"px, 0px, 0px)",transform:"translate3d("+(-d*r)+"px, 0px, 0px)"})}}if(this.defaults.smallBtn){for(var o=0;o<this.btns.length;o++){this.btns[o].className=""}if(this.need){this.btns[b.getNow(d,k/2)].className="active"}else{this.btns[b.getNow(d,k)].className="active"}}if(this.defaults.number){this.slideNub.innerHTML=((b.getNow(d,k)+1)%this.defaults.total==0?this.total:(b.getNow(d,k)+1)%this.defaults.total)}c[b.getNow(d,k)].addEventListener("webkitTransitionEnd",m,false);c[b.getNow(d,k)].addEventListener("transitionend",m,false);function m(){if(p.defaults.location){if(e<-(k-1)*r-r/5){if(p.defaults.lastImgSlider&&typeof p.defaults.lastImgSlider=="function"){p.defaults.laseMoveFn(0);p.defaults.lastImgSlider()}}}c[b.getNow(p.now,k)].removeEventListener("webkitTransitionEnd",m,false);c[b.getNow(p.now,k)].removeEventListener("transitionend",m,false)}},play:function(){var c=this;c.timer=setInterval(function(){c.now++;c.tab(null,"++",true)},this.defaults.playTime)},pause:function(){var c=this;clearInterval(c.timer)},orientationchangeHandler:function(){var c=this;setTimeout(function(){c.liInit()},300)},addSmallBtn:function(){var d="",e=this.aLi;for(var c=0;c<e.length;c++){if(c==this.defaults.startIndex){d+='<span class="active" data-ol-btn="btn"></span>'}else{d+='<span data-ol-btn="btn"></span>'}}return d},show:function(){this.oBox.style.display="inline-block"},hide:function(){this.oBox.style.display="none"}};b.extend=function(d,c){for(name in c){if(c[name]!==undefined){d[name]=c[name]}}};b.extend(b,{setStyle:function(d,c){for(name in c){d.style[name]=c[name]}},getTranX:function(e){var d=e.style.WebkitTransform||e.style.transform;var f=d.indexOf("translate3d(");var c=parseInt(d.substring(f+12,d.length-13));return c},_device:function(){var f=!!("ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch);var d="touchstart";var e="touchmove";var c="touchend";return{hasTouch:f,startEvt:d,moveEvt:e,endEvt:c}},getNow:function(d,c){return d%c},getPre:function(e,c){if(e%c-1<0){var d=c-1}else{var d=e%c-1}return d},getNext:function(e,d){var c=(e+1)%d;return c},getNextNew:function(e,d){var c=(e+2)%d;return c},move:function(g,d,f,c){var h=f||null;if(h){g.style.zIndex=h}b.setStyle(g,{WebkitTransform:"translate3d("+d+"px, 0px, 0px)",transform:"translate3d("+d+"px, 0px, 0px)"});if(!c){var e=parseFloat(d)/100;if(e>0.8){e=0.8}else{if(-0.8<e<0){e=(-e)}else{if(e<=-0.8){e=0.8}}}b.setStyle(g,{padding:e+"%"})}},stopDefault:function(c){if(c&&c.preventDefault){c.preventDefault()}else{window.event.returnValue=false}return false},stopPropagation:function(c){if(c&&c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}}});return a})();M.define("downloadpannel",function(b){var a=function(c){this.init(c)};M.object.merge(a.prototype,{init:function(d){var c=M.object.merge(d,{url:""});this.url=c.url;this.source=c.source;this.cookieFlag=!!c.cookieFlag?c.cookieFlag:"m_index";this.sourceType=!!c.sourceType?c.sourceType:"M";this.sourceValue=!!c.sourceValue?c.sourceValue:"index"},setMping:function(d){try{var f=new MPing.inputs.Click(d);f.event_param="";var c=new MPing();c.send(f)}catch(g){source.log("dowloadbanner mping virtual errpr",g)}},appShieldBind:function(f){var c=this;var l=M.object.merge({closecallback:null,openappback:null,sourceform:"",maskEvent:"MHome_MaskPic"},f.action);var c=this;var k=l.beforedom;var j=l.afterdom;var g=(!!f.containerdom||!M.object.isString(f.containerdom))?document.body:(document.getElementById(f.containerdom)==null?document.body:document.getElementById(f.containerdom));if(!!!l.openappback){l.openappback=function(){document.querySelector("#"+m).style.display="none"}}var m=l.bannerid;var h=l.openappid;var i=l.closebtnid;var e=document.createElement("div");e.id=m;e.className="app-download-popup";e.style="display: block;transform-origin: 0px 0px 0px;opacity: 1;transform: scale(1, 1);";e.innerHTML='<div class="app-download-popup-inner"><i id="'+i+'"  class="btn-close"></i><div  id="'+h+'" ><img id="maskpic"   src="'+c.url+'/images/index/app.png"><span class="app-btn"><img id="maskgo"   src="'+c.url+'/images/index/app-go.png"></span></div></div>';g.insertAdjacentElement("beforeEnd",e);document.getElementById("maskpic").addEventListener("click",function(){!!l.oldmaskEvent&&c.setMping(l.oldmaskEvent);c.setMping(l.maskEvent)});document.getElementById("maskgo").addEventListener("click",function(){!!l.oldopenEvent&&c.setMping(l.oldopenEvent);c.setMping(l.openEvent)});document.getElementById(i).addEventListener("click",function(){!!l.oldcloseEvent&&c.setMping(l.oldcloseEvent)});var d={openAppBtnId:h,closePanelBtnId:i,closePanelId:m,downAppURl:l.downAppURl,closeCallblack:l.closecallback,closeCallblackSource:c.source,openAppCallback:l.openappback,openAppCallblackSource:c.source,cookieFlag:!!l.cookieFlag?l.cookieFlag:c.cookieFlag,openAppEventId:null,closePanelEventId:l.closeEvent,sourceType:c.sourceType,sourceValue:c.sourceValue,appDownCloseIntervalTime:l.appDownCloseIntervalTime,appDownOpenIntervalTime:l.appDownOpenIntervalTime,M_sourceFrom:l.sourceform};$.downloadAppPlugIn(d)},appBannerBind:function(j){var c=this;var f=M.object.merge({content1:"免费领取188元大礼包",content2:"首次下单前即可领取",fontSizeOne:"13px",fontSizeTwo:"13px",colorOne:"#FFFFFF",colorTwo:"#999999",iconColor:"#FFFFFF",logo:(c.url+"/images/index/top-jdlogo.png"),icon:"立即领取"},j.data);var p=M.object.merge({closecallback:function(){},openappcallback:function(){},sourceform:""},j.action);var c=this;var n=p.beforedom;var m=p.afterdom;if(!M.object.isString(n)&&!M.object.isString(n)){c.log(">> banner cannot be setted into dom tree!")}if(!!!p.openappback&&!!p.oldopenEvent){p.openappback=function(){c.setMping(p.oldopenEvent)}}var q=p.bannerid;var k=p.openappid;var l=p.closebtnid;var i=document.createElement("div");i.id=q;var d=!!f.bg;i.className="download-pannel"+(!d?" download-noBg":"");var h=f&&f.fontSizeOne&&f.colorOne?"font-size:"+f.fontSizeOne+";color:"+f.colorOne+";":"";var r=f&&f.fontSizeTwo&&f.colorTwo?"font-size:"+f.fontSizeTwo+";color:"+f.colorTwo+";":"";var o=f&&f.iconColor?"color:"+f.iconColor+";":"";var g=[];if(d){g.push('<div class="pannel-bg"><img src="'+f.bg+'"></div>')}g.push('<div class="download-close"><img  id="'+l+'"   src="'+c.url+'/images/index/icon-close-banner.png"></div>');g.push('<div class="download-logo"><img src="'+f.logo+'"></div>');g.push('<div class="download-txt"><span class="download-content"><em class="content-up" style="'+h+'">'+f.content1+'</em><em class="content-down"style="'+r+'">'+f.content2+"</em></span></div>");g.push('<div class="download-action"><a id="'+k+'" href="javascript:;"><span '+(f.icon.length<=4?'class="font-large"':"")+'style="'+o+'">'+f.icon+"</span></a></div>");i.innerHTML=g.join("");if(n!=null){$("#"+n).before(i)}else{if(m!=null){$("#"+m).after(i)}}var e={openAppBtnId:k,closePanelBtnId:l,closePanelId:q,downAppURl:p.downAppURl,openAppCallback:p.openappback,closeCallblack:p.closecallback,closeCallblackSource:c.source,cookieFlag:!!p.cookieFlag?p.cookieFlag:c.cookieFlag,openAppEventId:p.openEvent,closePanelEventId:p.closeEvent,sourceType:c.sourceType,sourceValue:c.sourceValue,appDownCloseIntervalTime:p.appDownCloseIntervalTime,appDownOpenIntervalTime:p.appDownOpenIntervalTime,M_sourceFrom:p.sourceform};$.downloadAppPlugIn(e)},autoOpenapp:function(){var c={M_sourceFrom:"syauto",NoJumpDownLoadPage:true,kepler_param:null};$.downloadAppPlugInOpenApp(c)},downloadAppPlugInOpenApp:function(e){var d=this;var c={openAppBtnId:e.openapp,closePanelBtnId:e.closerbtn,closePanelId:e.bannerid,downAppURl:e.downAppURl,openAppCallback:e.openappback,openAppCallblackSource:d.source,closeCallblack:e.closecallback,closeCallblackSource:d.source,inteneUrl:e.inteneUrl,inteneUrlParams:e.inteneUrlParams,cookieFlag:e.cookieFlag,noRecord:!!e.noRecord,openAppEventId:e.openEvent,closePanelEventId:e.closeEvent,sourceType:d.sourceType,sourceValue:d.sourceValue,appDownCloseIntervalTime:e.appDownCloseIntervalTime,appDownOpenIntervalTime:e.appDownOpenIntervalTime,M_sourceFrom:e.sourceform};$.downloadAppPlugIn(c)},log:function(c,d){console.log("Opps!Something Wrong!Please notice it!--"+c+",error:"+d)}});b.clazz=a});M.define("index",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(d){this.threadTime=500;this.thread=new (M.exports("thread").clazz)({time:this.threadTime});if(M.object.isObject(d)){this.lastseckillTime=null;this.beenshield=false;this.recommendhasrender=false;this.appBannerID="download_banner";this.openapp="download_openapp";this.openweb="download_openweb";this.slider=[];this.jsswitch=this.getargval(d.jsswitch,{});this.url=this.getargval(d.url,"");this.autoseckill=this.getswitch("autoSeckill");this.newseckillurl=this.getargval(d.index_newseckill,"//ms.m.jd.com/seckill/seckillList");this.bannerobj=(!!d.appBanner&&!M.object.isEmpty(d.appBanner.banner))?d.appBanner.banner:null;this.hasAppBanner=d&&d.appBanner?d.appBanner.isOpen:false;this.appBannerType=d&&d.appBanner?d.appBanner.indexClientType:0;this.openReportTime=this.getargval(d.reporttime);this.ishttpinvoke=this.getargval(d.ishttpinvoke);this.rotatetime=this.getargval(d.rotatetime);this.ismeritco=this.getargval(d.ismeritco,false);this.noindexOptimizeImg=this.getswitch("indexOptimizeImg");this.noscreenlog=this.getswitch("indexScreenlog");this.nocartnum=this.getswitch("indexShowCartnum");this.meritcopin=this.getargval(d.meritpin,"");this.indexshield=this.getswitch("appShield");this.$=$(window);this.autoappcall=this.getswitch("autoappcall");this.globalabtest=this.getswitchvalue("globalabtest");this.sliderInit(d);this.seckillInit(d);this.floatLayerInit(d.indexFloatLayer);this.topLayerInit(d.indexPhotoCeiling);this.recommendInit(this.getswitchvalue("recommend"))}var c="";var c=d.searchland.searchBoxWord;this.searchLand=new (M.exports("searchland").clazz)({showFuncObj:{source:this,func:function(){this.indexBodyheight=$("body").height();$("body").css("height","auto");var f=$("#"+this.appBannerID+"");if(f&&f.height()>0){var g=$("#fixedtop");var j=$("#topheader");var e=g.children("div");for(var h=0;h<e.length;h++){if(!$(e[h]).attr("search_land_searchTransformation_show")){$(e[h]).css("display","none")}}j.css("display","none")}}},hideFuncObj:{source:this,func:function(){$("#index_clear_keyword").hide();$("body").css("height",this.indexBodyheight);var f=$("#"+this.appBannerID+"");var g=$("#fixedtop");g.css("display","none");var e=g.children("div");for(var h=0;h<e.length;h++){if(!$(e[h]).attr("search_land_searchTransformation_show")){$(e[h]).css("display","block")}}setTimeout(function(){var i={display:"block"};g.css(i);if(g[0].className.indexOf("showfixedtop-half")<0&&f.height()>0){var j=$("#topheader");j.css("display","block")}},200);window.scrollTo(0,this.indexloc)}},claerKeywordBtnId:"index_clear_keyword",searchPanelId:"index_search_head",keyword:c,renderId:$(document.body),landSearchWordHide:true,hotKeyword:d.searchland.hotKeyword?d.searchland.hotKeyword:null,submitId:"index_search_submit",formId:"index_searchForm",catelogyListId:"index_category",keywordId:"index_newkeyword",isHome:true,closeSearchLandBtnId:"index_search_bar_cancel"});this.imgLazyLad=new (M.exports("Imglazyload").clazz)({isOpen:!this.noindexOptimizeImg});this.runtopId="indexToTop"},getswitch:function(c){return !!!c?false:!!this.jsswitch[c]},getswitchvalue:function(c){return !!!c?false:this.jsswitch[c]},getargval:function(e,c){var d=typeof(c)=="undefined"?null:c;return !!e?e:d},random:function(c,d){if(!!!d){d=0}return Math.floor(d+Math.random()*(c-d))},sliderInit:function(g){var c=this;if(g.sliderImgList&&M.object.isArray(g.sliderImgList)){c.sliderImgList=g.sliderImgList}else{c.sliderImgList=[]}if(g.hybridslider&&M.object.isArray(g.hybridslider)){c.hybridslider=g.hybridslider;c._lazyslider={list:[],count:0};for(var d=0,e=c.hybridslider.length;d<e;d++){var k=c.hybridslider[d];var l=k.floorid;var h=k.no;c._lazyslider.list.push({id:"#slider_"+l+"_"+h+"_touch",created:false})}}else{c.hybridslider=[]}c._sliderImgList={};c._hybridslider={};for(var f=0,m=c.sliderImgList.length;f<m;f++){var n=c.sliderImgList[f];c._sliderImgList[f]=n}for(var f=0,m=c.hybridslider.length;f<m;f++){var n=c.hybridslider[f];c._hybridslider[n.floorid]=n}},sliderHTML:function(){var f=[];var k=this;for(var d=1;d<k.sliderImgList.length;d++){var c=k.sliderImgList[d];f.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping"  report-eventlevel="1" report-eventid="MHome_BFocusPic" report-eventparam="'+c.sourceValue+'" page_name="index" href="'+c.action+'" ><img   src="'+c.horizontalImag.replace(/http:/g,"")+'"  /></a></li>')}f=f.join("");var j=$("#slider_touch");j.append(f);var g=j.children("li").first().height()+"px";j.css({"min-height":g});if(k.sliderImgList&&k.sliderImgList.length>1){k.hasActivityImg=true;var h=slide("#slider");try{h.init({loop:true,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000,callback:function(e){(function i(o,n){if(!!o.searchLand.openSearchLoad){return}n--;if(!!!o.ishttpinvoke){return}if(o._sliderImgList==null||o._sliderImgList[n]==null){return}var m=o._sliderImgList[n];if(!o.inviewport("#slider")){return}if(m==null||m.exposalUrl==null||m.exposalUrl==""||!!m.hasexposal){return}m.hasexposal=true;o.imgHttp(m.exposalUrl)})(k,e)}})}catch(l){$("#slider_touch").css("overflow","hidden");k.log("slider error!",l)}k.slider.push(h)}},seckillInit:function(k,d){var c=this;if(k.seckill){var o=(d&&(c.seclayout.gapwidth>0))?(' style = "width:'+c.seclayout.gapwidth+'px"'):"";if(!!!d){c.seclayout={urlobj:$("#seckillul"),liobj:null,urlwidth:0,gapwidth:0,more:50}}if(k.seckill.seckillTime&&k.seckill.timeRemain){c.endTime=k.seckill.seckillTime;c.timeRemain=k.seckill.timeRemain;var g=k.seckillImgList;c.seclayout.seclist=g;c.seclayout.container=c.seclayout.urlobj.parent();var e=[];var h="";if(g!=null){for(var j=d?0:3,m=g.length;j<m;j++){var l=g[j];var f=l.wareId?("?wareId="+l.wareId):"";e.push('<li class="seckill-new-item" '+o+'><div class="seckill-item-img bdr-r"><a report-eventid="MHome_BHandSeckill" report-eventlevel="1"  report-eventparam="'+l.sourceValue+'" page_name="index" href="'+c.newseckillurl+f+'" class="seckill-new-link J_ping"><img width="100%"  '+(d?('src="'+l.imageurl.replace(/http:/g,"")+'"'):(' src="'+c.url+'/images/index/seckill-220-new.png" imgsrc="'+l.imageurl.replace(/http:/g,"")+'" '))+' border="0" class="seckill-photo" />');if(!!l.tagText){e.push('<div class="seckill-tip" style="background-color:'+l.colorRGB+'">'+l.tagText+"</div>")}e.push('</a></div><div class="seckill-item-price"><span class="seckill-new-price"><em>&yen;</em>'+l.miaoShaPrice+'</span><span class="seckill-original-price"><em>&yen;</em>'+l.jdPrice+"<hr></span></div></li>")}if(g.length>3){e.push('<li class="seckill-all-item"><a href="'+c.newseckillurl+'"><div class="seckill-all"><i class="show-all-icon"></i><span class="show-all-title">查看全部</span></div></a></li>');if(d){c.seclayout.urlobj.html(e.join(""))}else{c.seclayout.urlobj.append(e.join(""))}}}c.seckillTime=1000;var n=$("#seckill_time").find("span");c.timezone=[n.eq(0),n.eq(1),n.eq(2),n.eq(3),n.eq(4),n.eq(5),n.eq(6),n.eq(7)];c.seckillTimer()}}},seckillTimer:function(){var c=this;var d=M.localstorage.get("index_seckill");var n=0;if(d){d=d.split("_");var k=d[0];var r=parseInt(d[1],10);var q=M.date.toDate(d[2]);var s=parseInt(d[3],10);if(c.endTime==k&&c.timeRemain==r){var e=new Date();var j=parseInt((e.getTime()-q.getTime())/1000,10);n=s-j;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(e,"yyyy-MM-dd HH:mm:ss")+"_"+n)}else{var e=new Date();n=c.timeRemain;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(e,"yyyy-MM-dd HH:mm:ss")+"_"+n)}}else{var e=new Date();n=c.timeRemain=c.timeRemain-1;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(e,"yyyy-MM-dd HH:mm:ss")+"_"+n)}var o=c.timezone;if(n>0){var t=n%60;var g=parseInt(n/60,10);var i=g%60;var h=parseInt(g/60,10);if(h<=0){o[0].text("0");o[1].text("0")}else{if(h>99){o[0].text("9");o[1].text("9")}else{if(h>9&&h<99){var h=h+"";o[0].text(h[0]);o[1].text(h[1])}else{var h=h+"";o[0].text("0");o[1].text(h[0])}}}if(i<=0){o[3].text("0");o[4].text("0")}else{if(i>9){i=i+"";o[3].text(i[0]);o[4].text(i[1])}else{o[3].text(0);o[4].text(i)}}if(t<=0){o[6].text("0");o[7].text("0")}else{if(t>9){t=t+"";o[6].text(t[0]);o[7].text(t[1])}else{o[6].text(0);o[7].text(t)}}}else{o[0].text("0");o[1].text("0");o[3].text("0");o[4].text("0");o[6].text("0");o[7].text("0");c.seckillpause=true;var f=document.getElementById("seckill_loading");var p=function(){M.http.ajax({url:"/index/nextseckill.action?r="+new Date().getTime(),data:"_format_=json",success:function(u){if(u&&u.seckill){try{var w=null;w=JSON.parse(u.seckill);data=w.content;var m={seckill:{}};if(data&&data.indexMiaoSha.length>0){m.seckill={seckillTime:data.overDate,timeRemain:data.timeRemain};m.seckillImgList=data.indexMiaoSha}var v=[];v.push('<a class="seckill-left-link  J_ping" href="'+c.newseckillurl+'" page_name="index" report-eventlevel="1" report-eventparam="" report-eventid="MHome_BHandSeckillTopic">');if(!!w.showNameImg){v.push('<img class="seckill-tit-img" src="'+data.showNameImg.replace("http:","")+'"/>')}else{v.push('<h2 class="seckill-title">'+data.showName+"</h2>")}v.push('<strong class="seckill-nth" style="font-color:'+data.maintitleColor+'">'+data.name+"</strong>");v.push(' <div class="seckill-timer" id="seckill_time"><div class="seckill-time"><span>0</span><span>0</span></div><span class="seckill-time-separator">:</span><div class="seckill-time"><span>0</span><span>0</span></div><span class="seckill-time-separator">:</span><div class="seckill-time"><span>0</span><span>0</span></div></div><span id="seckill_loading"></span></a>');v.push('<a class="seckill-more-link  J_ping" href="'+c.newseckillurl+'" page_name="index" report-eventlevel="1" report-eventparam="'+w.rcSourceValue+'" report-eventid="MHome_BHandSeckillMore">');v.push(!!w.rightCorner?w.rightCorner:"更多秒杀");v.push('<i class="seckill-more-icon"></i></a>');$("#seckill_title").html(v.join(""));c.seckillInit(m,true);c.seckillpause=false;if(c.seclayout){seckillimg=c.seclayout.urlobj.find("img");c.resizeSeckZone();var y=seckillimg.length;seckillimg.each(function(){var z=this;z.onload=function(){y--;if(y%5==0){c.resizeSeckimg(seckillimg)}}})}}catch(x){c.log("nextseckill error!",x);data=null}f.className=""}},error:function(m){f.className=""}})};if(c.lastseckillTime!=null&&((new Date()).getTime())-c.lastseckillTime.getTime()<3600000){return}if(c.autoseckill){c.lastseckillTime=new Date();f.className="seckill-loading";f.onclick=null;var l=c.random(5)+Math.random();setTimeout(p,l*1000)}else{f.className="seckill-nextsec";var l=0;f.onclick=p}}},seckillRun:function(d){var c=this;c.seckillTime=c.seckillTime-d;if(c.seckillTime==0){c.seckillTime=1000;if(c.seckillpause){return}c.seckillTimer()}},seckillRender:function(){var c=this;c.thread.addOne({name:"seckill",event:c.seckillRun,source:c})},appcenterHandler:function(){var c=this;var j=$("#appcenter a[sensitive]");if(j.length>0){for(var k=0,o=j.length;k<o;k++){var s=j[k];s.id=M.genId("sensitive_");var n=s.getAttribute("report-eventid");var r=s.getAttribute("report-eventparam");var h=s.getAttribute("report-eventlevel");var q=s.getAttribute("href");var l=s.getAttribute("channel");setTimeout(function(){c.sendMping("MHome_VirtualTest",r)},100);if(s.getAttribute("openapp")==1){var p=s.getAttribute("inteneUrl");var d=s.getAttribute("inteneParams");var g=s.getAttribute("sourceform");try{var f={openapp:s.id,openappback:function(){c.sendMping(n,r,h)},inteneUrl:p,inteneUrlParams:JSON.parse(d),noRecord:true,source:c,downAppURl:"https://h5.m.jd.com/active/download/download.html?channel="+l,sourceform:g};c.pannel.downloadAppPlugInOpenApp(f)}catch(m){c.log("appcenter downloadAppPlugin!",m)}}}}},sendMping:function(f,d,h){try{var g=new MPing.inputs.Click(f);g.event_param=!!d?d:"";g.event_level=!!h?parseInt(h):"";var c=new MPing();c.send(g)}catch(i){source.log("mping sendMping errpr",i)}},appBannerBind:function(){var d=this;var h=new (M.exports("downloadpannel").clazz)({url:d.url,source:d});d.pannel=h;var g=M.url.getParam("ad_od");if(g&&g=="1"&&d.autoappcall){h.autoOpenapp()}var q=!!d.bannerobj?d.bannerobj:{};var j={data:q,action:{},virtual:""};var k=d.appBannerType;var f=function(){var e=this;$("#"+e.appBannerID).attr("search_land_searchTransformation_show","true");e.indexFloatLayerRunOpen=true;$("#topheader").css("display","none");e.beenshield=true};var l=[{topen:"MDownLoadFloatTop_OpenC",mopen:"MHome_MaskGo",mclose:"MHome_MaskClose",mpic:"MHome_MaskPic"},{topen:"MHome_FloatTopOpen_ljdA",mopen:"MHome_MaskGoA",mclose:"MHome_MaskCloseA",mpic:"MHome_MaskPicA",oldtopen:"MDownLoadFloatTop_OpenC",oldmopen:"MHome_MaskGo",oldmclose:"MHome_MaskClose",oldmpic:"MHome_MaskPic"},{topen:"MHome_FloatTopOpen_ljdB",mopen:"MHome_MaskGoB",mclose:"MHome_MaskCloseB",mpic:"MHome_MaskPicB",oldtopen:"MDownLoadFloatTop_OpenC",oldmopen:"MHome_MaskGo",oldmclose:"MHome_MaskClose",oldmpic:"MHome_MaskPic"}];var o=0;if(!!d.globalabtest){o=(parseInt(d.globalabtest)==-1)?0:parseInt(d.globalabtest)}var c=l[o];switch(k){case 1:j.virtual="MDownLoadFloatTop_Expose_VirtualImmediately";j.action={beforedom:"index_search_main",bannerid:d.appBannerID,openappid:d.openapp,closebtnid:d.openweb,downAppURl:"//h5.m.jd.com/active/download/download.html?channel=jd-msya",closecallback:f,openEvent:"MDownLoadFloatTop_OpenImmediately",closeEvent:"MDownLoadFloatTop_CloseImmediately",sourceform:"syA"};!!d.hasAppBanner&&h.appBannerBind(j);break;case 2:j.virtual="MDownLoadFloatTop_Expose_Virtual";j.action={bannerid:"box_shield",openappid:"box_shield_openapp",closebtnid:"box_shield_openweb",downAppURl:"//h5.m.jd.com/active/download/download.html?channel=jd-msyzzb",cookieFlag:"m_index_shield",openEvent:"MHome_MaskGo",closeEvent:"MHome_MaskClose",appDownCloseIntervalTime:86400000,appDownOpenIntervalTime:86400000,sourceform:"syzzB"};!!d.indexshield&&h.appShieldBind(j);break;case 0:j.virtual="MDownLoadFloatTop_Expose_VirtualC";var n={};n.action={bannerid:"box_shield",openappid:"box_shield_openapp",closebtnid:"box_shield_openweb",downAppURl:"//h5.m.jd.com/active/download/download.html?channel=jd-msyzzc",cookieFlag:"m_index_shield",openEvent:c.mopen,oldopenEvent:c.oldmopen,closeEvent:c.mclose,oldcloseEvent:c.oldmclose,maskEvent:c.mpic,oldmaskEvent:c.oldmpic,appDownCloseIntervalTime:86400000,appDownOpenIntervalTime:86400000,sourceform:"syzzC"};!!d.indexshield&&h.appShieldBind(n);j.action={beforedom:"index_search_main",bannerid:d.appBannerID,openappid:d.openapp,closebtnid:d.openweb,downAppURl:"//h5.m.jd.com/active/download/download.html?channel=jd-msyc",closecallback:f,openEvent:c.topen,oldopenEvent:c.oldtopen,closeEvent:"MDownLoadFloatTop_CloseC",sourceform:"syC"};!!d.hasAppBanner&&h.appBannerBind(j);break;default:break}try{var p=new MPing.inputs.Click(j.virtual);p.event_param="";var i=new MPing();i.send(p)}catch(m){d.log("mping virtual errpr",m)}if(!!!d.hasAppBanner){d.indexFloatLayerRunOpen=true}},floatLayerInit:function(c){var d=this;if(c&&c.url&&$.trim(c.url)!="0"){d.floatUrl=c.url;d.indexFloatLayerId="indexFloatLayer";d.indexFloatLayerRunOpen=false;d.indexFloatLayerRunTimer=0}},floatLayerRender:function(){var c=this;if(c.floatUrl){c.thread.addOne({name:"floatLayer",event:function(){var e=this;if(e.indexFloatLayerRunOpen){if($("#"+e.indexFloatLayerId).css("transform")=="none"||$("#"+e.indexFloatLayerId).css("-webkit-transform")=="none"||$("#"+e.indexFloatLayerId).css("transform")==""||$("#"+e.indexFloatLayerId).css("-webkit-transform")==""||$("#"+e.indexFloatLayerId).css("transform")=="translateX(0px)"||$("#"+e.indexFloatLayerId).css("-webkit-transform")=="translateX(0px)"){if(e.indexFloatLayerRunTimer>12){e.indexFloatLayerRunTimer=0}e.indexFloatLayerRunTimer++;if(e.indexFloatLayerRunTimer==12){var d={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+e.indexFloatLayerId).css(d);setTimeout(function(){var f={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"",transition:""};$("#"+e.indexFloatLayerId).css(f)},200)}}else{e.indexFloatLayerRunTimer=0}}},source:c});c.floatLayerBind();$("#"+c.indexFloatLayerId).css("display","block")}},floatLayerBind:function(){var c=this;if(c.floatUrl){$("#"+c.indexFloatLayerId).on("click",function(){var d={transform:"translateX(0px)","-webkit-transform":"translateX(0px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+c.indexFloatLayerId).css(d);setTimeout(function(){location.href=c.floatUrl},200)})}},topLayerInit:function(c){var d=this;if(!!c&&!!c.id&&!!c.img&&!!c.url&&!!c.srv){d.toplayer=c}},topLayerRender:function(){var d=this;if(!!d.toplayer){var c="<div  search_land_searchTransformation_show='true' class='toplayer toplayerhidden' ><a   report-eventid='MHome_BFloor' report-eventlevel='1'  report-eventparam='"+d.toplayer.srv+"' page_name='index'  class='J_ping' href='"+d.toplayer.url+"'><img  src='"+d.toplayer.img+"'/></a></div>";$("#fixedtop").append(c);d.toplayer.dom=$("#fixedtop").children().last()}},navigationhandler:function(){var d=this;if(!!!d.nocartnum){var c=$("#sid").val();var e=!!c?("?sid="+encodeURIComponent(c)+"&t="+(Date.now())):("?t="+(Date.now()));M.http.ajax({url:"https://mapi.m.jd.com/cart/cart.json"+e,type:"get",success:function(h){if(!!h){var i=0;try{if(!!h&&!!h.sid&&h.sid==c&&!!h.cartJson&&!!h.cartJson){var g=h.cartJson;if(M.object.isNumber(g.resultCode)&&g.resultCode==0){i=(!!g.cartInfo&&!!g.cartInfo.Num)?parseInt(g.cartInfo.Num):0}}i=parseInt(i);i>0&&$(".bottom-bar-pannel img[func=cart]").after("<span class='cart-num'>"+(i>99?"99+":i)+"</span>")}catch(j){d.log("mapi data exception")}}},error:function(){d.log("mapi data exception")}});function f(){alert(1)}}},searchhandler:function(){var c=this;document.getElementById("index_newkeyword").addEventListener("click",function(g){if(!!!c.searchLand.openSearchLoad){try{var f=new MPing.inputs.Click("MHome_BSearch");f.event_param="";f.event_level="1";var d=new MPing();d.send(f)}catch(g){}}});c.searchLand.render()},toTopBind:function(){var c=this;$("#"+c.runtopId).on("click",function(){window.scrollTo(0,0);var d=$("#"+c.appBannerID+"");if(d&&d.height()>0){var e=$("#fixedtop");var f=$("#topheader");e.removeClass("showfixedtop-half").addClass("showfixedtop");f.css("display","block");c.under=1}if($("#slider").height()>0){$($("#index_search_head").children()[0]).css("opacity",0)}})},recordIndexLoc:function(){var e=this;$("#index_searchLogin").on("click",function(){M.cookie.setCookie("location",$(window).scrollTop(),0.0035,"","jd.com")});var c=M.url.getParam("indexloc");if(c&&c=="1"){var f=M.cookie.getCookie("location");M.cookie.delCookie("location");var d=parseInt(f);if(!isNaN(d)){$(window).on("load",function(){window.scrollTo(0,d);if(d>=50){var g=$("#"+e.appBannerID+"");if(g&&g.height()>0){topheader.css("display","none");fixedtop.removeClass("showfixedtop").addClass("showfixedtop-half")}}})}}},recommendInit:function(d){var c=this;if(d){c.recommendPin=d.pin;c.recommendUesCached=d.useCached;c.recommendOpen=d.open;c.recommendPage=0;c.recommendPageCount=1;c.recommendDataCount=0;c.recommendListId="recommendList";c.recommendListLoadId="recommendListload";c.recommendListloadImg="recommendListloadImg";c.recommendListLoadMoreBtn="recommendListLoadMoreBtn";c.recommendCanLoad=true;c.recommendloadHeight=0;c.hasRecommenddata=true}},recommendLoadData:function(){var c=this;if(c.recommendCanLoad&&c.hasRecommenddata){c.recommendCanLoad=false;$("#"+c.recommendListLoadId).css("display","block;");$("#"+c.recommendListloadImg).css("display","block;");$("#"+c.recommendListLoadMoreBtn).css("display","none;");var l="indexRecommendData_new";var i=null;if(c.recommendUesCached){var f=M.localstorage.get(l);try{f=JSON.parse(f)}catch(j){c.log("Line728_dataArr");f=null}if(f&&f.length==2){if(c.recommendPin){i=f[1];if(i.length>=(c.recommendPage+1)){i=i[c.recommendPage]}else{i=null}}else{i=f[0];if(i.length>=(c.recommendPage+1)){i=i[c.recommendPage]}else{i=null}}if(!i||(new Date().getTime()-i.updateTime)>(4*60*60*1000)||i.pin!=c.recommendPin){i=null}}else{try{var k=JSON.stringify([[],[]]);M.localstorage.set(l,k)}catch(j){}}}else{M.localstorage.remove(l)}if(i==null){M.http.ajax({url:"/index/recommend.action",data:"_format_=json&page="+(c.recommendPage+1),success:function(r){var q=false;var u=false;if(r&&r.recommend){try{i=JSON.parse(r.recommend)}catch(t){c.log(t,"error");i=null;c.hasRecommenddata=false}if(i&&i.wareInfoList&&i.wareInfoList.length>0){i.recommendList=i.wareInfoList}if(i&&i.recommendList&&i.recommendList.length==0){c.hasRecommenddata=false;u=true}if(i&&i.recommendList&&i.recommendList.length>0){if(c.recommendPage==0){var n=c.recommendMainHtml(i);$("#newviewport").append(n);c.recommendBind();c.recommendAddExposeBind()}var m=Math.floor(c.recommendDataCount/2);var p=c.recommendListHtml(i);$("#"+c.recommendListId).append(p);c.calculationRecommendImg();setTimeout(function(){(function(A){var x=$(".similar-li"),B=null,z=null,w=null,e=null;var v=A;A=Math.floor(x.length/2);for(var y=v;y<A;y++){B=$(x[y*2]).find(".sam-price");z=$(x[y*2+1]).find(".sam-price");w=$(x[y*2]).find(".sam-space");e=$(x[y*2+1]).find(".sam-space");if(B.length>0&&z.length==0&&e[0].className.indexOf("sam-height")==-1){e.addClass("sam-height")}else{if(B.length==0&&z.length>0&&w[0].className.indexOf("sam-height")==-1){w.addClass("sam-height")}}}})(m)},100);if(c.recommendUesCached){i.updateTime=new Date().getTime();i.pin=c.recommendPin;var o=M.localstorage.get(l);try{o=JSON.parse(o)}catch(t){o=null}if(o&&M.object.isArray(o)){if(c.recommendPin){if(o[1].length>=(c.recommendPage+1)){o[1][c.recommendPage]=i}else{o[1].push(i)}}else{if(o[0].length>=(c.recommendPage+1)){o[0][c.recommendPage]=i}else{o[0].push(i)}}}try{M.localstorage.set(l,JSON.stringify(o))}catch(t){}}c.recommendPage++;var s=M.url.getParam("recommend");if(s=="1"&&c.recommendPage==1){M.url.setHash("recommend");window.location=window.location}c.imgLazyLad.lazyLad();c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;if(c.recommendPage%3==0&&c.hasRecommenddata){q=true}else{q=false}u=true}}if(u){if(q){$("#"+c.recommendListLoadId).css("display","block;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;");c.recommendCanLoad=true}}else{c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;c.recommendCanLoad=false;$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;")}},error:function(){c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;c.recommendCanLoad=false;$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;")}})}else{if(c.recommendPage==0){var d=c.recommendMainHtml(i);$("#newviewport").append(d);c.recommendBind();c.recommendAddExposeBind()}var g=c.recommendListHtml(i);$("#"+c.recommendListId).append(g);c.calculationRecommendImg();var h=M.url.getParam("recommend");c.recommendPage++;c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;if(h=="1"&&c.recommendPage==1){M.url.setHash("recommend");window.location=window.location}c.imgLazyLad.lazyLad();if(c.recommendPage%3==0&&c.hasRecommenddata){$("#"+c.recommendListLoadId).css("display","block;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;");c.recommendCanLoad=true}}}c.recommendhasrender=true},recommendMainHtml:function(e){var d=this;var c=[];if(e&&e.recommendList&&e.recommendList.length>0){c.push('<div id="recommend" class="floor love-floor">');c.push('<div class="gray-text"><span class="gray-layout"><span class="gray-text-img"></span>\u4e3a\u60a8\u63a8\u8350</span></div>');c.push('<ul class="find-similar-ul cf" id="'+d.recommendListId+'">');c.push("</ul>");c.push('<div style="clear: left;"></div>');c.push('<div style="display: none;" class="swipe-up love-loading" id="'+d.recommendListLoadId+'">');c.push('<div class="swipe-up-wrapper ">');c.push('<div style="display: none;" id="'+d.recommendListloadImg+'" class="loading-con">');c.push('<span class="pagenum" id="showPageID"></span>');c.push('<span class="loading"><i class="love-loading-icon">\u52a0\u8f7d\u4e2d\u002e\u002e\u002e</i></span>');c.push('<div class="clear"></div>');c.push("</div>");c.push('<div style="display: none;" id="'+d.recommendListLoadMoreBtn+'" class="click-loading"><a href="javascript:void(0);">\u70b9\u51fb\u7ee7\u7eed\u52a0\u8f7d</a></div>');c.push("</div>");c.push("</div>");c.push("</div>")}return c.join("")},recommendListHtml:function(l){var c=this;var h=c.url==null?"":c.url;var n=[];if(l&&l.recommendList&&l.recommendList.length>0){for(var m=0;m<l.recommendList.length;m++){var d=l.recommendList[m];var r=d.itemType;var s=d.clickUrl;if((r&&r!="0"&&r!="1")||(d.type&&d.type!="ware")){continue}c.recommendDataCount++;if(r=="0"){n.push('<li class="similar-li"><a  '+((!!s)?(' clickUrl="'+s+'" '):"")+' class="J_ping" report-eventlevel="1" report-eventid="MHomeGuessYouLike_BProducts"  report-eventparam="'+d.sourceValue+'" page_name="index" href="//item.m.jd.com/product/'+d.wareId+'.html">');n.push('<div  class="similar-product"><img alt="'+d.wname+'" class="Jschangewidth" src="'+h+'/images/index/m-home-pic-new.png" imgsrc="'+(!!d.imageurl?d.imageurl.replace(/http:/g,""):"")+'" >');n.push('<span class="similar-product-text">');var p=false,f=false;if(!!d.wareType&&d.wareType=="8"){n.push('<img src="'+(!!d.markImageUrl?d.markImageUrl.replace(/http:/g,""):"")+'" style="'+(!!d.markWidth?("width:"+d.markWidth+"px;"):"")+(!!d.markHeight?("height:"+d.markHeight+"px;"):"")+'" class="chosen">');f=true}else{if(!!d.isSamWare&&(!!!d.wareType)){n.push('<img src="'+c.url+'/images/index/samsb.png" class="samsb">');p=true}}n.push(d.wname+"</span>");n.push('<span class="similar-product-price">');if(!!d.jdPrice){d.jdPrice=d.jdPrice+"";var q=d.jdPrice.split(".");if(!!q){n.push("&yen;");if(!!q[0]){n.push('<span class="big-price">'+q[0]+"</span>")}if(!!q[1]){n.push('<span class="small-price">.'+q[1]+"</span>")}}}n.push('<span class="guess-button J_ping" report-eventlevel="1" report-eventid="MHomeGuessYouLike_BSimilarities"  report-eventparam="'+(c.recommendPage*20+m+1)+"_"+d.wareId+'_1" page_name="index" onclick="event.preventDefault();window.location.href=\'//home.m.jd.com/myjd/similar/list.action?skuId='+d.wareId+"'\"  >\u770b\u76f8\u4f3c</span>");n.push("</span>");if(!!d.isSamWare&&!!d.samPrice&&!!!d.isPlusWare){var u=d.samPrice+"";n.push('<span class="sam-price">&yen;'+u+"</span>")}if(!!d.isPlusWare&&!!!d.isSamWare){var g=d.tryPlusPrice+"";n.push('<span class="sam-price  plus-price">&yen;'+g+"</span>")}n.push('<span class="sam-space"></span>');n.push("</div></a>");n.push("</li>")}else{if(r=="1"){if(!!d.imageurl&&d.wname&&d.followCount){var t=d.subWareList;var e=[];if(t&&t.length>0){for(var k=0,o=t.length;k<o;k++){if(!!t[k].wareId&&!!t[k].imageUrl){e.push(t[k])}}}if(e.length>=2){n.push('<li class="similar-li similar-shop">');n.push('<div class="shop-posre"><img class="shop-seat" src="'+c.url+'/images/index/load/similar-shop.png">');n.push('<div class="similar-product"><a class="J_ping" report-eventlevel="1" report-eventid="MHome_BRecommendShop"  report-eventparam="'+d.sourceValue+'" page_name="index"  href="https://shop.m.jd.com/?shopId='+d.wareId+'">');n.push('<p class="smshop-logo" ><img src="'+(!!d.imageurl?d.imageurl.replace(/http:/g,""):"")+'"></p>');n.push('<p class="smshop-name"><i></i>'+d.wname+"</p>");n.push('<p class="smshop-num">'+d.followCount+"人关注</p>");n.push('<p class="smshop-btn"><span>查看店铺</span></p>');n.push('<p class="sm-line"><span></span><i></i></p>');n.push("</a>");n.push('<div class="sm-imglist">');n.push('<a class="sm-imgitem J_ping"  report-eventlevel="1" report-eventid="MHome_BRecommendShopProduct"  report-eventparam="'+e[1].wareId+'" page_name="index"    href="https://shop.m.jd.com/?shopId='+d.wareId+"&homeSku="+e[0].wareId+'" >');n.push('<img  src="'+(e[0].imageUrl.replace(/http:/g,""))+'">');n.push("</a>");n.push('<a class="sm-imgitem J_ping"  report-eventlevel="1" report-eventid="MHome_BRecommendShopProduct"  report-eventparam="'+e[1].wareId+'" page_name="index"    href="https://shop.m.jd.com/?shopId='+d.wareId+"&homeSku="+e[1].wareId+'" >');n.push('<img  src="'+(e[1].imageUrl.replace(/http:/g,""))+'">');n.push("</a>");n.push("</div>");n.push("</div></div>");n.push('<a class="J_ping" report-eventlevel="1" report-eventid="MHome_BRecommendShop"  report-eventparam="'+d.sourceValue+'" page_name="index"   href="https://shop.m.jd.com/?shopId='+d.wareId+'">');n.push('<span class="sam-space"></span>');n.push("</a>");n.push("</li>")}}}}}}return n.join("")},recommendAddExposeBind:function(){document.getElementById("recommend").addEventListener("click",function(f){try{var d=f.target||f.srcElement;while(d.id!="recommend"&&d.tagName.toLowerCase()!="a"){d=d.parentNode}if(d.tagName.toLowerCase()=="a"){var c=d.getAttribute("clickUrl");if(c!=null){$.getJSON(c+"&jsoncallback=?",function(e){})}}}catch(f){source.log("recommendAddExposeBind error!",f)}})},recommendBind:function(){var c=this;if(c.recommendOpen){$("#"+c.recommendListLoadMoreBtn).on("click",function(d){c.recommendCanLoad=true;c.recommendLoadData()})}},recommendRender:function(){var c=this;if(c.recommendOpen&&!c.recommendhasrender){c.recommendLoadData();c.recommendhasrender=true}},calculationRecommendImg:function(){var d=this;var c=$("body").width();$("#"+d.recommendListId).find(".Jschangewidth").forEach(function(f,e){var g=$(f).parent().width();$(f).css({width:g,height:g})});$("#"+d.recommendListId).find(".similar-shop").forEach(function(f,e){var g=$(f).find(".shop-seat").width()+72;$(f).find(".shop-posre").css({height:g})});$("#"+d.recommendListId).find(".smshop-logo").forEach(function(f,e){var g=$(".similar-product").width()-68;$(f).find("img").css({height:g/3})});$("#"+d.recommendListId).find(".sm-imgitem").forEach(function(f,e){var g=($(".similar-product").width()-14)/2-6;$(f).find("img").css({height:g})})},resizeFunction:function(){var f=this;var d="onorientationchange" in window;var c=d?"orientationchange":"resize";var e=null;if(this.seclayout){e=this.seclayout.urlobj.find("img");f.resizeSeckZone();var g=e.length;e.each(function(){var h=this;h.onload=function(){g--;if(g%4==0){f.resizeSeckimg(e)}}})}$(window).on(c,function(){if(f.recommendOpen&&f.recommendCanLoad){f.recommendloadHeight=$("#scwrapper").height()-$("#"+f.recommendListId).find("li").eq(0).height()*4}f.calculationRecommendImg();try{var i=navigator.userAgent.indexOf("iPhone")>=0&&navigator.userAgent.indexOf("MQQBrowser")>=0;if(!i&&f.seclayout){f.resizeSeckZone();f.resizeSeckimg(e,true)}}catch(j){f.log("resizeSeckimg error!",j)}f.imgLazyLad.lazyLad();f.imgLazyLad.squareImg(".square-img");var h=$(".shop-img").width()/2;$(".shop-img").find("img").css({width:h,height:h})})},resizeSeckZone:function(){var f=this.seclayout;if(f==null||f.seclist==null||f.seclist.length<=3){return}var d=f.urlobj.find("li");var g=(f.container.width()-50)/3;for(var e=0,c=d.length-1;e<c;e++){d[e].style.width=g+"px"}f.gapwidth=g;f.urlwidth=g*(d.length-1)+f.more;f.urlobj.width(f.urlwidth);if(f.touchobj){f.touchobj.fixetRootWidth(f.urlwidth-f.container.width());f.touchobj.basegap=f.gapwidth;f.touchobj.goToEnd(10,f.touchobj.tar,f.touchobj.rootWidth,null)}},resizeSeckimg:function(g,f){for(var e=0,c=g.length;e<c;e++){var d=parseInt($(g[e]).width(),10);var h=parseInt($(g[e]).height(),10);if(f||d!=h){$(g[e]).height(d+"px")}}},loadSeckimg:function(g,f){var j=($(window).width()-20)/3;for(var e=3,c=g.length;e<c;e++){g[e].style.width=j+"px";g[e].style.height=j+"px";var d=parseInt($(g[e]).width(),10);var h=parseInt($(g[e]).height(),10);if(f||d!=h){$(g[e]).height(d+"px")}}},sliderlazyload:function(A){var t=this;var r=t._lazyslider;if(r==null){return}var o=r.list;if(r.count>=o.length){return}var F=new Date();var n=t.$h?t.$h:t.$.height();var f=!!A?A:t.$.scrollTop();for(var x=0,y=o.length;x<y;x++){if(o[x].created){continue}var h=$(o[x].id);if(h.length==0){continue}var p=h.offset().top-n-200;if(parseInt(f)>=parseInt(p)){for(var w=x,z=t.hybridslider.length;w<z;w++){var c=t.hybridslider[w];var d=[];var C=c.floorid;var s=c.no;if(o[x].id.indexOf(C+"_"+s)<0){continue}t._lazyslider.count++;o[x].created=true;var E=c.sliderlist;for(var v=1,B=E.length;v<B;v++){var g=E[v];d.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping" report-eventlevel="1" report-eventid="MHome_BFloor" report-eventparam="'+g.sourceValue+'" page_name="index" href="'+g.url+'" ><img   src="'+g.img.replace(/http:/g,"")+'"  /></a></li>')}d=d.join("");var l=$("#slider_"+C+"_"+s+"_touch");l.append(d);var q=l.children("li").first().height()+"px";l.css({"min-height":q,overflow:"hidden"});var u=slide("#slider_"+C+"_"+s);try{u.init({loop:true,_floorid:C,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000,callback:function(e){k(t,this._floorid,e)}});t.slider.push(u)}catch(D){t.log(o[x].id+" error!",D)}}}}function k(m,j,i){if(!!m.searchLand.openSearchLoad){return}if(!!!m.ishttpinvoke){return}i--;if(m._hybridslider==null||m._hybridslider[j]==null){return}var e=m._hybridslider[j];if(!m.inviewport("#slider_"+e.floorid+"_"+e.no)){return}var G=e.sliderlist;if(G==null||G[i]==null||G[i].exposalUrl==null||G[i].exposalUrl==""||!!G[i].hasexposal){return}G[i].hasexposal=true;m.imgHttp(G[i].exposalUrl)}},inviewport:function(f){if(f==null||$(f)==null){return false}var d=this;var e=d.$.scrollTop();var c=$(f).offset().top;if(!!!d.$h){d.$h=d.$.height()}return c>=e&&c<=(e+d.$h)},showtoplayer:function(c){var f=this;if(f.toplayer==null||f.toplayer.dom==null||!!!f.toplayer.id){return false}var g=!!c?c:f.$.scrollTop();var e=$("div[ceilingid]");if(!!!f.toplayer.firsttime){f.toplayer.sear_h=$("#index_search_main").height();f.toplayer.att_h=e.height();f.toplayer.wh2=2.5*f.$h}if(e.length==1){if(e.attr("ceilingid")==f.toplayer.id){var d=((g+f.toplayer.sear_h)>=e.offset().top+f.toplayer.att_h)?["toplayerhidden","toplayershow"]:["toplayershow","toplayerhidden"];f.toplayer.dom.removeClass(d[0]).addClass(d[1])}}else{if(e.length==0&&!!!f.toplayer.target){var d=((g)>=f.toplayer.wh2)?["toplayerhidden","toplayershow"]:["toplayershow","toplayerhidden"];f.toplayer.dom.removeClass(d[0]).addClass(d[1])}}f.toplayer.firsttime=true},imgHttp:function(c){if(c==null||c==""){return}var e=this;var f=new Image(1,1);var d=c.indexOf("?")>-1?(c+"&_="+new Date().getTime()):(c+"?_="+new Date().getTime());f.src=d},scrollFunction:function(){var o=this;var g,n,q,r,u,y,w,p,s,x,z,e,h;var k=1;var d={};o.under=1;p=0,s=0.85;$(document).ready(function(){g=$($("#index_search_head").children()[0]);n=$("#index_search_main");q=$("#fixedtop");r=$("#topheader");z=$("#"+o.appBannerID+"");var f=$("#slider");u=g.height();y=f.height()-u;h=z.height();o.$h=o.$.height();o.searchbarrgb=g.css("opacity")});o.$.on("load",function(){y=y<0?($("#slider").height()-u):y;x=$(window).scrollTop()<=y?0:1;setTimeout(function(){var K=$(window).scrollTop();x=1;j(K);if(K>0){o.imgLazyLad.lazyLad()}o.imgLazyLad.squareImg(".square-img");var J=$(".shop-img").width()/2;$(".shop-img").find("img").css({width:J,height:J})},0);var I=$(window).scrollTop();if(navigator.userAgent.indexOf("baidubrowser")>0&&navigator.userAgent.indexOf("Android")>0&&I>0){window.scrollTo(0,I+1)}var G=3;var D=setInterval(function(){if(o.hasAppBanner&&(z!=null&&(z.css("display")=="none"||z.height()==0))&&(r.css("display")=="block")){r.css("display","none");o.beenshield=true}if(--G==0){clearInterval(D)}},200);setTimeout(function(){if(o.$.scrollTop()>200||$("#scwrapper").height()<=o.$.height()){o.recommendRender()}},100);var E=navigator.userAgent.indexOf("MX");if(E!=-1){$(".graphic-img img").css({height:"auto"});$(".floor-tit-img .tit-img").css({height:"auto",width:"22%"})}if($("#scroll-news").length>0){var f=Number(o.rotatetime);setInterval(function(){$("#scroll-news").find(".news-list").animate({"-webkit-transform":"translate3d(0px,-23px, 0px)",transform:"translate3d(0px,-23px, 0px)",},500,"ease",function(){$(this).css({"-webkit-transform":"translate3d(0px,0px, 0px)",transform:"translate3d(0px,0px, 0px)",}).find("li:first").appendTo(this)})},isNaN(f)?3000:f*1000)}if(o.ismeritco&&!!o.meritcopin){setTimeout(function(){M.http.ajax({url:"http://"+o.meritcopin+".web.meritco.m.jd.com?t="+(Date.now()),type:"get",success:function(){}});try{var K=new MPing.inputs.Click("MHome_BPageVirtual");K.event_param=o.meritcopin;var J=new MPing();J.send(K)}catch(L){o.log("mping jiuqian errpr",L)}},0)}if(!o.noscreenlog){setTimeout(function(){var J=!!window.devicePixelRatio?window.devicePixelRatio:-1;var K=!!navigator.serviceWorker?1:0;M.http.ajax({url:"/index/screen.action?a="+window.screen.width+"&b="+J+"&c="+K+"&r="+new Date().getTime(),data:"_format_=json",success:function(){}})},0)}if(o.openReportTime){try{if(!!rTimeArr&&M.object.isArray(rTimeArr)){rTimeArr[7]={time:new Date(),sTime:"0"};var C=new R_Time();var H=C.calculateTime(rTimeArr);var A=C.urlParse("sid")||"";var B=C.extend({id:"137",flag:"1",sid:A},H);C.sendTime(B)}}catch(F){o.log("reporttime error!",F)}}});function j(A){if(!!!o.hasActivityImg){g.css("opacity",0.85);return}var f=A;if(f<=y){g.css("opacity",f<u?p:s*((f-u)/y));x=1}else{if(x==1){g.css("opacity",s);x=0}}}var t=null;var m=0;if(o.seclayout){t=o.seclayout.urlobj.offset();m=t.height+t.top}o.$.on("touchstart",function(f){v=false;i=false;var A=f.touches[0];d.starty=A.clientY;d.startx=A.clientX;d.inity=d.starty;d.scrolly=0;d.lastdate=Date.now();d.lastY=0;d.secondzone=f.touches[0].pageY<=m});o.$.on("touchmove",function(C){var E=C.touches[0];var A=E.clientY;var B=E.clientX;var f=o.$.scrollTop();if(f<0){return}d.diry=A-d.starty;d.dirx=B-d.startx;if(Math.abs(d.diry)<=Math.abs(d.dirx)){direct=0;return}var D=A-d.starty;if(D*d.lastgap<0){d.inity=A}d.scrolly=A-d.inity;if(d.diry<0){j(f+Math.abs(d.scrolly))}else{j(f-Math.abs(d.scrolly))}d.starty=A;d.startx=B;d.lastgap=D});$(window).on("touchend",function(f){if(d.secondzone){if(d.diry<0&&o.$.scrollTop()>=0){setTimeout(function(){if(!o.beenshield&&h!=null&&h!=0){r.css("display","none");q.removeClass("showfixedtop").addClass("showfixedtop-half")}},50)}}else{}});var v=false,c=0,i=false,l=new Date();o.$.scroll(function(C){var A=o.$;var f=A.scrollTop();if(f<0){return}var B=z?z.height():50;if(!o.beenshield&&B!=null&&B!=0){if(f==0){if(!i){q.removeClass("showfixedtop-half").addClass("showfixedtop");r.css("display","block");o.under=1;i=true}}else{r.css("display","none");q.removeClass("showfixedtop").addClass("showfixedtop-half");k=1}}if(!!!o.hasActivityImg){g.css("opacity",0.85)}else{if(f<=y){g.css("opacity",f<u?p:s*((f-u)/y));c=0}else{if(c==0){g.css("opacity",s);c=1}}}if(f>=o.$h){$("#"+o.runtopId).show()}else{$("#"+o.runtopId).hide()}if(o.recommendOpen){if(o.recommendCanLoad&&f>=o.recommendloadHeight){o.recommendLoadData()}}o.imgLazyLad.lazyLad();if(!!!o.searchLand.openSearchLoad){o.indexloc=f}else{r.css("display","none")}o.sliderlazyload(f);o.showtoplayer(f)})},seckillImgScroll:function(){if(!this.seclayout){return}var d=this.seclayout;var e=this.newseckillurl;if(d.seclist.length<=3){return}var c=new (M.exports("touchHandlerX").clazz)({target:d.urlobj[0],noscroll:false,basegap:d.gapwidth,other:this.slider});c.touchEndfn(function(f){if(f<0){window.location.href=e}});d.touchobj=c;c.run();c.fixetRootWidth(d.urlwidth-d.container.width())},run:function(){var c=this;try{c.appBannerBind()}catch(d){try{$("#"+c.appBannerID+"").remove();$("#topheader").css("display","none")}catch(d){}c.log("Appbanner error!",d)}c.sliderHTML();c.appcenterHandler();try{if(c.endTime){c.seckillRender()}c.resizeFunction();c.seckillImgScroll()}catch(d){c.log("",d)}try{c.scrollFunction();c.recordIndexLoc();c.toTopBind()}catch(d){c.log("",d)}c.searchhandler();c.imgLazyLad.lazyLad(true);c.sliderlazyload();c.thread.start();c.floatLayerRender();c.navigationhandler();c.topLayerRender()},log:function(c,d){console.log("Opps!Something Wrong!Please notice it!--"+c+",error:"+d)}});a.clazz=b});M.define("touchHandlerX",function(b){var a=function(d){this.init(d)};M.object.merge(a.prototype,{init:function(d){c.target=null;c.noscroll=false;c.direct=0;c.basegap=0;c.endfn=function(){};c.movefn=function(){};c.startfn=function(){};c.prefix="-webkit-";if(d!=null&&M.object.isObject(d)){M.object.merge(c,d)}},getX:function(f){var e=this;if(!!!f){f=e.tar}var d=$(f).css("transform");if(!d){d=$(f).css("-webkit-transform")}if(d=="none"){d=0}else{d=d.replace("translate3d(","").replace(",0px,0px)","");d=parseFloat(d,10)}if(!d){d=0}return d},goToEnd:function(g,f,k,h){var d=this;var e=null;var l=null;var j=g<0?g:0;var i=g<0?(-k):0;e={transform:"translate3d("+j+"px,0px,0px)",transition:"0.3s ease 0s"};l={transform:"translate3d("+i+"px,0px,0px)"};if(g!=0){d.css($(f),e);setTimeout(function(){d.css($(f),l);if(h){h(i)}},200);return true}},css:function(g,h){var f=c.prefix;var e={};for(var d in h){if(typeof(d)=="string"){e[f+d]=h[d];e[d]=h[d]}}g.css(e)},fixetRootWidth:function(d){this.rootWidth=d;this.screenWidth=$(this.tar).parent().width();this.bannerWidth=this.rootWidth+this.screenWidth},getAnimationobj:function(k){var j=k<0?-1:1;k=Math.abs(k);var h=[],f=0,d=1;var e=this.screenWidth;var i=this.basegap*j;e=[i,i*2];if(!!this.shortmove){return[i,d*0.5]}if(k>0&&k<=e[0]){h.push(i);h.push(d*0.5)}else{if(k>e[0]&&k<=e[1]){h.push(i*2);h.push(d*0.5)}else{if(k>e[1]){h.push(i*3);h.push(d*0.6)}}}return h},animateX:function(d,e){var f={transform:"translate3d("+d+"px,0px,0px)",transition:"-webkit-transform "+e+"s cubic-bezier(0.333333, 0.666667, 0.666667, 1)"};this.css($(this.tar),f)},gotoX:function(f,d){var e=this;if(!!!f){f=this.tar}e.css($(f),{transform:"translate3d("+d+"px,0px,0px)"})},getObj:function(){return this.tar},run:function(){var l=this;var k=c.target;var e=$(k);l.tar=k;l.basegap=c.basegap;var i=null;var m={};var f=0;l.screenWidth=e.parent().width();l.rootWidth=$(k).width()-l.screenWidth;rootWidth=l.rootWidth;var d=[];var j=function(t){if(c.other){for(var r=0,x=c.other.length;r<x;r++){c.other[r].play()}}var p=false;var A=Date.now();if(A-m.lastdate>=1){p=true}if(i==1){i=0;return}var q=t.changedTouches[0];var s=q.clientX;var z=m.initx+s-m.startx;if(z>0||z<(-1*l.rootWidth)){var w=null;if(m.initx-m.startx<-l.rootWidth){w=c.endfn}d.push(setTimeout(function(){l.goToEnd(z,k,l.rootWidth,w)},50));return}var y=s-m.startx;l.shortmove=(y<=l.basegap&&y>=-l.basegap)?true:false;if(p){l.shortmove=true}var v=l.getAnimationobj(y);var u=(l.shortmove&&v[0]>0)?0:v[0];var o=z-(z%l.basegap)+u;if(o>0||o<(-1*l.rootWidth)){var w=null;if(m.initx-m.startx<-l.rootWidth){w=c.endfn}setTimeout(function(){l.goToEnd(o,k,l.rootWidth,w)},50);return}var n=setTimeout(function(){l.animateX(o,v[1])},0);d.push(n);m.lastmovesX=o};e.off("touchend",j);e.on("touchend",j);var h=function(q){var s=q.targetTouches[0];var o=s.pageY;var p=s.pageX;m.diry=o-m.starty;m.dirx=p-m.startx;if(Math.abs(m.dirx)<Math.abs(m.diry)){i=1}else{var n=Date.now();m.lastdate=n;var r=m.initx+p-m.startx;r=r>0?0:r;l.gotoX(e,r);l.preventDefault()}};e.off("touchmove",h);e.on("touchmove",h);var g=function(p){if(c.other){for(var o=0,n=c.other.length;o<n;o++){c.other[o].pause()}}$(k).css("transition","");$(k).css("-webkit-transition","");for(var o=0,n=d.length;o<n;o++){clearTimeout(d[o])}var q=p.targetTouches[0];m.starty=q.pageY;m.startx=q.pageX;m.initx=l.getX(k);m.scrollx=0;m.lastX=0;m.lastdate=0;if(!!!m.lastmovesX){m.lastmovesX=0}};e.off("touchstart",g);e.on("touchstart",g)},preventDefault:function(d){if(d&&ev.preventDefault){d.preventDefault()}else{window.event.returnValue=false}return false},touchEndfn:function(d){c.endfn=M.object.isFunction(d)?d:null},touchMovefn:function(d){c.movefn=M.object.isFunction(d)?d:null},touchStartfn:function(d){c.startfn=M.object.isFunction(d)?d:null},touchfn:function(d){if(M.object.isObject(d)){M.object.merge(c,d)}}});var c=a;b.clazz=a});var ceshi=0;function debug(a){document.getElementById("index_newkeyword").value=a};